!function(t){var e={};function s(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=t,s.c=e,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)s.d(i,r,function(e){return t[e]}.bind(null,r));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=0)}([function(t,e,s){"use strict";s.r(e);var i=function(){},r={},n=[],a=[];function o(t,e){var s,o,c,l,d=a;for(l=arguments.length;l-- >2;)n.push(arguments[l]);for(e&&null!=e.children&&(n.length||n.push(e.children),delete e.children);n.length;)if((o=n.pop())&&void 0!==o.pop)for(l=o.length;l--;)n.push(o[l]);else"boolean"==typeof o&&(o=null),(c="function"!=typeof t)&&(null==o?o="":"number"==typeof o?o=String(o):"string"!=typeof o&&(c=!1)),c&&s?d[d.length-1]+=o:d===a?d=[o]:d.push(o),s=c;var h=new i;return h.nodeName=t,h.children=d,h.attributes=null==e?void 0:e,h.key=null==e?void 0:e.key,void 0!==r.vnode&&r.vnode(h),h}function c(t,e){for(var s in e)t[s]=e[s];return t}function l(t,e){null!=t&&("function"==typeof t?t(e):t.current=e)}var d="function"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout;var h=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,u=[];function p(t){!t._dirty&&(t._dirty=!0)&&1==u.push(t)&&(r.debounceRendering||d)(f)}function f(){for(var t;t=u.pop();)t._dirty&&$(t)}function g(t,e){return t.normalizedNodeName===e||t.nodeName.toLowerCase()===e.toLowerCase()}function y(t){var e=c({},t.attributes);e.children=t.children;var s=t.nodeName.defaultProps;if(void 0!==s)for(var i in s)void 0===e[i]&&(e[i]=s[i]);return e}function b(t){var e=t.parentNode;e&&e.removeChild(t)}function m(t,e,s,i,r){if("className"===e&&(e="class"),"key"===e)   ;else if("ref"===e)l(s,null),l(i,t);else if("class"!==e||r)if("style"===e){if(i&&"string"!=typeof i&&"string"!=typeof s||(t.style.cssText=i||""),i&&"object"==typeof i){if("string"!=typeof s)for(var n in s)n in i||(t.style[n]="");for(var n in i)t.style[n]="number"==typeof i[n]&&!1===h.test(n)?i[n]+"px":i[n]}}else if("dangerouslySetInnerHTML"===e)i&&(t.innerHTML=i.__html||"");else if("o"==e[0]&&"n"==e[1]){var a=e!==(e=e.replace(/Capture$/,""));e=e.toLowerCase().substring(2),i?s||t.addEventListener(e,x,a):t.removeEventListener(e,x,a),(t._listeners||(t._listeners={}))[e]=i}else if("list"!==e&&"type"!==e&&!r&&e in t){try{t[e]=null==i?"":i}catch(t){}null!=i&&!1!==i||"spellcheck"==e||t.removeAttribute(e)}else{var o=r&&e!==(e=e.replace(/^xlink:?/,""));null==i||!1===i?o?t.removeAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase()):t.removeAttribute(e):"function"!=typeof i&&(o?t.setAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase(),i):t.setAttribute(e,i))}else t.className=i||""}function x(t){return this._listeners[t.type](r.event&&r.event(t)||t)}var S=[],w=0,C=!1,v=!1;function k(){for(var t;t=S.shift();)r.afterMount&&r.afterMount(t),t.componentDidMount&&t.componentDidMount()}function M(t,e,s,i,r,n){w++||(C=null!=r&&void 0!==r.ownerSVGElement,v=null!=t&&!("__preactattr_"in t));var a=_(t,e,s,i,n);return r&&a.parentNode!==r&&r.appendChild(a),--w||(v=!1,n||k()),a}function _(t,e,s,i,r){var n=t,a=C;if(null!=e&&"boolean"!=typeof e||(e=""),"string"==typeof e||"number"==typeof e)return t&&void 0!==t.splitText&&t.parentNode&&(!t._component||r)?t.nodeValue!=e&&(t.nodeValue=e):(n=document.createTextNode(e),t&&(t.parentNode&&t.parentNode.replaceChild(n,t),O(t,!0))),n.__preactattr_=!0,n;var o,c,l=e.nodeName;if("function"==typeof l)return function(t,e,s,i){var r=t&&t._component,n=r,a=t,o=r&&t._componentConstructor===e.nodeName,c=o,l=y(e);for(;r&&!c&&(r=r._parentComponent);)c=r.constructor===e.nodeName;r&&c&&(!i||r._component)?(H(r,l,3,s,i),t=r.base):(n&&!o&&(L(n),t=a=null),r=W(e.nodeName,l,s),t&&!r.nextBase&&(r.nextBase=t,a=null),H(r,l,1,s,i),t=r.base,a&&t!==a&&(a._component=null,O(a,!1)));return t}(t,e,s,i);if(C="svg"===l||"foreignObject"!==l&&C,l=String(l),(!t||!g(t,l))&&(o=l,(c=C?document.createElementNS("http://www.w3.org/2000/svg",o):document.createElement(o)).normalizedNodeName=o,n=c,t)){for(;t.firstChild;)n.appendChild(t.firstChild);t.parentNode&&t.parentNode.replaceChild(n,t),O(t,!0)}var d=n.firstChild,h=n.__preactattr_,u=e.children;if(null==h){h=n.__preactattr_={};for(var p=n.attributes,f=p.length;f--;)h[p[f].name]=p[f].value}return!v&&u&&1===u.length&&"string"==typeof u[0]&&null!=d&&void 0!==d.splitText&&null==d.nextSibling?d.nodeValue!=u[0]&&(d.nodeValue=u[0]):(u&&u.length||null!=d)&&function(t,e,s,i,r){var n,a,o,c,l,d=t.childNodes,h=[],u={},p=0,f=0,y=d.length,m=0,x=e?e.length:0;if(0!==y)for(var S=0;S<y;S++){var w=d[S],C=w.__preactattr_,v=x&&C?w._component?w._component.__key:C.key:null;null!=v?(p++,u[v]=w):(C||(void 0!==w.splitText?!r||w.nodeValue.trim():r))&&(h[m++]=w)}if(0!==x)for(var S=0;S<x;S++){c=e[S],l=null;var v=c.key;if(null!=v)p&&void 0!==u[v]&&(l=u[v],u[v]=void 0,p--);else if(f<m)for(n=f;n<m;n++)if(void 0!==h[n]&&(k=a=h[n],j=r,"string"==typeof(M=c)||"number"==typeof M?void 0!==k.splitText:"string"==typeof M.nodeName?!k._componentConstructor&&g(k,M.nodeName):j||k._componentConstructor===M.nodeName)){l=a,h[n]=void 0,n===m-1&&m--,n===f&&f++;break}l=_(l,c,s,i),o=d[S],l&&l!==t&&l!==o&&(null==o?t.appendChild(l):l===o.nextSibling?b(o):t.insertBefore(l,o))}var k,M,j;if(p)for(var S in u)void 0!==u[S]&&O(u[S],!1);for(;f<=m;)void 0!==(l=h[m--])&&O(l,!1)}(n,u,s,i,v||null!=h.dangerouslySetInnerHTML),function(t,e,s){var i;for(i in s)e&&null!=e[i]||null==s[i]||m(t,i,s[i],s[i]=void 0,C);for(i in e)"children"===i||"innerHTML"===i||i in s&&e[i]===("value"===i||"checked"===i?t[i]:s[i])||m(t,i,s[i],s[i]=e[i],C)}(n,e.attributes,h),C=a,n}function O(t,e){var s=t._component;s?L(s):(null!=t.__preactattr_&&l(t.__preactattr_.ref,null),!1!==e&&null!=t.__preactattr_||b(t),j(t))}function j(t){for(t=t.lastChild;t;){var e=t.previousSibling;O(t,!0),t=e}}var T=[];function W(t,e,s){var i,r=T.length;for(t.prototype&&t.prototype.render?(i=new t(e,s),z.call(i,e,s)):((i=new z(e,s)).constructor=t,i.render=A);r--;)if(T[r].constructor===t)return i.nextBase=T[r].nextBase,T.splice(r,1),i;return i}function A(t,e,s){return this.constructor(t,s)}function H(t,e,s,i,n){t._disable||(t._disable=!0,t.__ref=e.ref,t.__key=e.key,delete e.ref,delete e.key,void 0===t.constructor.getDerivedStateFromProps&&(!t.base||n?t.componentWillMount&&t.componentWillMount():t.componentWillReceiveProps&&t.componentWillReceiveProps(e,i)),i&&i!==t.context&&(t.prevContext||(t.prevContext=t.context),t.context=i),t.prevProps||(t.prevProps=t.props),t.props=e,t._disable=!1,0!==s&&(1!==s&&!1===r.syncComponentUpdates&&t.base?p(t):$(t,1,n)),l(t.__ref,t))}function $(t,e,s,i){if(!t._disable){var n,a,o,l=t.props,d=t.state,h=t.context,u=t.prevProps||l,p=t.prevState||d,f=t.prevContext||h,g=t.base,b=t.nextBase,m=g||b,x=t._component,C=!1,v=f;if(t.constructor.getDerivedStateFromProps&&(d=c(c({},d),t.constructor.getDerivedStateFromProps(l,d)),t.state=d),g&&(t.props=u,t.state=p,t.context=f,2!==e&&t.shouldComponentUpdate&&!1===t.shouldComponentUpdate(l,d,h)?C=!0:t.componentWillUpdate&&t.componentWillUpdate(l,d,h),t.props=l,t.state=d,t.context=h),t.prevProps=t.prevState=t.prevContext=t.nextBase=null,t._dirty=!1,!C){n=t.render(l,d,h),t.getChildContext&&(h=c(c({},h),t.getChildContext())),g&&t.getSnapshotBeforeUpdate&&(v=t.getSnapshotBeforeUpdate(u,p));var _,j,T=n&&n.nodeName;if("function"==typeof T){var A=y(n);(a=x)&&a.constructor===T&&A.key==a.__key?H(a,A,1,h,!1):(_=a,t._component=a=W(T,A,h),a.nextBase=a.nextBase||b,a._parentComponent=t,H(a,A,0,h,!1),$(a,1,s,!0)),j=a.base}else o=m,(_=x)&&(o=t._component=null),(m||1===e)&&(o&&(o._component=null),j=M(o,n,h,s||!g,m&&m.parentNode,!0));if(m&&j!==m&&a!==x){var z=m.parentNode;z&&j!==z&&(z.replaceChild(j,m),_||(m._component=null,O(m,!1)))}if(_&&L(_),t.base=j,j&&!i){for(var N=t,V=t;V=V._parentComponent;)(N=V).base=j;j._component=N,j._componentConstructor=N.constructor}}for(!g||s?S.push(t):C||(t.componentDidUpdate&&t.componentDidUpdate(u,p,v),r.afterUpdate&&r.afterUpdate(t));t._renderCallbacks.length;)t._renderCallbacks.pop().call(t);w||i||k()}}function L(t){r.beforeUnmount&&r.beforeUnmount(t);var e=t.base;t._disable=!0,t.componentWillUnmount&&t.componentWillUnmount(),t.base=null;var s=t._component;s?L(s):e&&(null!=e.__preactattr_&&l(e.__preactattr_.ref,null),t.nextBase=e,b(e),T.push(t),j(e)),l(t.__ref,null)}function z(t,e){this._dirty=!0,this.context=e,this.props=t,this.state=this.state||{},this._renderCallbacks=[]}function N(t,e,s){return M(s,t,{},!1,e,!1)}c(z.prototype,{setState:function(t,e){this.prevState||(this.prevState=this.state),this.state=c(c({},this.state),"function"==typeof t?t(this.state,this.props):t),e&&this._renderCallbacks.push(e),p(this)},forceUpdate:function(t){t&&this._renderCallbacks.push(t),$(this,2)},render:function(){}});const V={x:0,y:0};function U(t,e){return{x:t.x+e.x,y:t.y+e.y}}function B(t,e){return{x:e.x-t.x,y:e.y-t.y}}function D(t){return{x:-t.x,y:-t.y}}function I(t,e){return{x1:t.x1+e.x,y1:t.y1+e.y,x2:t.x2+e.x,y2:t.y2+e.y}}function F(t,e){return Object.assign({},t,{x:Math.round(t.x+e.x),y:Math.round(t.y+e.y)})}function K(t){if(0===t.length)return{x1:0,y1:0,x2:0,y2:0};{const e=t[0];return t.slice(1).reduce((t,e)=>({x1:Math.min(t.x1,e.x1),y1:Math.min(t.y1,e.y1),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),e)}}function G(t){return[P(t),R(t),E(t),Y(t)]}function P(t){return{x:t.x1,y:t.y1}}function R(t){return{x:t.x2,y:t.y1}}function E(t){return{x:t.x1,y:t.y2}}function Y(t){return{x:t.x2,y:t.y2}}function J(t){return{x1:Math.min(t.x1,t.x2),y1:Math.min(t.y1,t.y2),x2:Math.max(t.x1,t.x2),y2:Math.max(t.y1,t.y2)}}function X(t,e){return e.x1<=t.x&&t.x<=e.x2&&e.y1<=t.y&&t.y<=e.y2}function Q(t){return K(t.seats.map(t=>({x1:t.x,y1:t.y,x2:t.x+t.width,y2:t.y+t.height})))}function q(t){return{type:"addingSeats",seats:t,position:V}}function Z(t){return"addingSeats"===t.type}function tt(t,e,s){return{type:"movingSeats",seats:t,initialPosition:e,position:e,positionInAction:s}}function et(t){return"movingSeats"===t.type}function st(t,e){return{type:"zoneSelection",zone:t,additionalSeats:e}}function it(t){return"zoneSelection"===t.type}function rt(t,e){return{type:"graping",clientStartingPosition:t,mapStartingPosition:e}}function nt(t){return"graping"===t.type}function at(t){return{x1:t.x,y1:t.y,x2:t.x+t.width,y2:t.y+t.height}}function ot(t){return{x:t.x1,y:t.y1,width:t.x2-t.x1,height:t.y2-t.y1}}function ct(t){const e=ot(K(t.seats.map(at)));return o("svg",{viewBox:`${e.x-5} ${e.y-5} ${e.width+10} ${e.height+10}`,width:800,height:500},t.seats.map(e=>o("g",{id:`seat-${e.id}`},"rectangle"===function(t,e){const s=e.find(e=>e.id===t.type);return void 0!==s?s.figure:"rectangle"}(e,t.types)?function(t){return o("rect",{x:t.x,y:t.y,width:t.width,height:t.height,fill:"#fff",stroke:"black"})}(e):function(t){return o("ellipse",{cx:t.x+t.width/2,cy:t.y+t.height/2,rx:t.width/2,ry:t.height/2,fill:"#fff",stroke:"black"})}(e),o("text",Object.assign({x:e.x+e.width/2,y:e.y+e.height/2},{"dominant-baseline":"middle","text-anchor":"middle"}),e.name))))}function lt(t){let e="";for(let s in t)t.hasOwnProperty(s)&&(e+=`${s}{${dt(t[s])}}`);return e}function dt(t){const e=[];for(let s in t)t.hasOwnProperty(s)&&e.push(`${ht(s)}:${t[s]}`);return e.join(";")}function ht(t){return t.replace(/[A-Z]/g,"-$&").toLowerCase()}function ut(t,e){return Math.round(t)===Math.round(e)}const pt=5;function ft(t,e){return Math.abs(t.x1-e.x1)<pt?e.x1-t.x1:Math.abs(t.x2-e.x2)<pt?e.x2-t.x2:Math.abs(t.x1-e.x2)<pt?e.x2-t.x1:Math.abs(t.x2-e.x1)<pt?e.x1-t.x2:0}function gt(t,e){return Math.abs(t.y1-e.y1)<pt?e.y1-t.y1:Math.abs(t.y2-e.y2)<pt?e.y2-t.y2:Math.abs(t.y1-e.y2)<pt?e.y2-t.y1:Math.abs(t.y2-e.y1)<pt?e.y1-t.y2:0}function yt(t){return e=>{e.currentTarget===e.target&&t(e)}}const bt={".field":{display:"flex",alignItems:"center",width:"100%",margin:"1rem 0"},".field .field-label":{margin:0,flexBasis:"150px",flexShrink:0},".field-input":{margin:"0",marginLeft:"0.5rem",display:"flex",flexGrow:1},".field-input input[type=text], .field-input input[type=number], .field-input input[type=color]":{width:"100%",border:"1px solid #ccc",borderRadius:"2px",padding:"0.25rem",flexGrow:1},".field-input.radio":{flexDirection:"column"},".field-input.radio label":{display:"flex",alignItems:"center",margin:"0.25rem 0"},".field-input.radio label input[type=radio]":{margin:0,marginRight:"0.5rem"}};function mt(t,e){return new Promise((s,i)=>{const r=document.createElement("div"),n=r.attachShadow({mode:"open"});document.body.appendChild(r);const a=()=>document.body.removeChild(r);N(o("div",{},o("style",{},lt(Object.assign({".modal":{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.25)",display:"flex",justifyContent:"center",alignItems:"center"},".container":{backgroundColor:"white"},".title":{margin:0,padding:"15px",borderBottom:"1px solid #ccc"},".body":{margin:0,padding:"15px"},".footer":{margin:0,padding:"15px",display:"flex",justifyContent:"flex-end",borderTop:"1px solid #ccc"},".row":{display:"flex"},".col":{maxHeight:"510px",overflow:"auto"}},bt))),o(t,Object.assign({},{onSubmit:t=>{a(),s(t)},onCancel:()=>{a(),i()}},e))),n)})}class xt extends z{constructor(){super(...arguments),this.stopPropagation=(t=>t.stopPropagation()),this.onKeyPress=(t=>{"Escape"===t.key&&this.props.onCancel()})}componentDidMount(){this.base&&this.base.focus()}render(t){return o("div",{class:"modal",onClick:t.onCancel,tabIndex:-1,onKeyPress:this.onKeyPress},o("div",{class:"container",onClick:this.stopPropagation},o("h4",{class:"title"},t.title),o("div",{class:"body"},t.children),o("div",{class:"footer"},o("button",{type:"submit",onClick:t.onSubmit},"Submit"),o("button",{onClick:t.onCancel},"Cancel"))))}}function St(t,e){return new Array(t).fill(0).map((t,s)=>e(s))}function wt(t,e,s){if(t.length===e.length){for(let i=0;i<t.length;i++)if(!s(t[i],e[i]))return!1;return!0}return!1}function Ct({direction:t,numberOfSeats:e,spacing:s,firstLetter:i,firstNumber:r,changing:n,order:a,type:o,seatWidth:c,seatHeight:l}){const d=e=>"horizontal"===t?(c+s)*e:0,h=e=>"vertical"===t?(l+s)*e:0,u=t=>"letter"===n?Mt("ascending"===a?kt(i)+t:kt(i)-t):i,p=t=>"number"===n?"ascending"===a?r+t:r-t:r;return St(e,t=>({id:-1,type:o,name:`${u(t)}${p(t)}`,x:d(t),y:h(t),width:c,height:l}))}const vt="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");function kt(t){return""===t?0:t.toUpperCase().split("").filter(t=>vt.includes(t)).map(t=>vt.indexOf(t)+1).reverse().reduce((t,e,s)=>t+e*Math.pow(26,s),0)}function Mt(t){let e=t,s="";for(;e>0;)s=vt[(e-1)%26]+s,e=Math.floor((e-1)/26);return s}function _t({numberOfRows:t,numberOfColumns:e,columnSpacing:s,rowSpacing:i,shift:r,firstLetter:n,firstNumber:a,letterDirection:o,letterOrder:c,numberOrder:l,type:d,seatWidth:h,seatHeight:u}){const p=(t,e)=>Mt("ascending"===c?kt(n)+t:e+kt(n)-t-1),f=(t,e)=>"ascending"===l?a+t:e+a-t-1,g=(s,i)=>"horizontal"===o?`${p(s,t)}${f(i,e)}`:`${p(i,e)}${f(s,t)}`;return St(t,t=>St(e,e=>({id:-1,type:d,name:g(t,e),x:(h+i)*e+t*r%(h+i),y:(u+s)*t,width:h,height:u}))).flat()}class Ot extends z{constructor(t){super(t),this.onChange=(t=>{this.props.onChange(t.target.value)})}render(t){return o("div",{class:"field"},o("p",{class:"field-label"},t.label),o("p",{class:"field-input radio"},t.options.map(e=>o("label",null,o("input",{type:"radio",name:t.name,value:e.value,checked:t.value===e.value,onChange:this.onChange}),e.label))))}}class jt extends z{constructor(t){super(t),this.onInput=(t=>{const e=t.target,s=parseInt(e.value,10);this.props.onChange(s)})}render(t){return o("div",{class:"field"},o("label",{for:t.name,class:"field-label"},t.label),o("p",{class:"field-input"},o("input",{type:"number",name:t.name,id:t.name,min:t.min,max:t.max,value:t.value.toString(),onInput:this.onInput})))}}class Tt extends z{constructor(t){super(t),this.onInput=(t=>{const e=t.target;this.props.onChange(e.value)}),this.onKeyPress=(t=>t.stopPropagation())}render(t){return o("div",{class:"field"},o("label",{for:t.name,class:"field-label"},t.label),o("p",{class:"field-input"},o("input",{type:"text",name:t.name,id:t.name,value:t.value,onInput:this.onInput,onKeyPress:this.onKeyPress})))}}const Wt=50,At=50;function Ht(t,e){return t.id===e.id&&t.name===e.name&&t.x===e.x&&t.y===e.y}class $t extends z{constructor(t){super(t),this.updateDirection=(t=>this.setState({direction:t})),this.updateNumberOfSeats=(t=>this.setState({numberOfSeats:t})),this.updateSpacing=(t=>this.setState({spacing:t})),this.updateFirstLetter=(t=>this.setState({firstLetter:t})),this.updateFirstNumber=(t=>this.setState({firstNumber:t})),this.updateChanging=(t=>this.setState({changing:t})),this.updateOrder=(t=>this.setState({order:t})),this.updateType=(t=>this.setState({type:parseInt(t,10)})),this.updateSeatWidth=(t=>this.setState({seatWidth:t})),this.updateSeatHeight=(t=>this.setState({seatHeight:t})),this.onSubmit=(()=>this.props.onSubmit(this.state)),this.onCancel=(()=>this.props.onCancel()),this.state={direction:"horizontal",numberOfSeats:1,spacing:0,firstLetter:"A",firstNumber:1,changing:"number",order:"ascending",type:t.types[0].id,seatWidth:Wt,seatHeight:At}}render(t,e){return o(xt,{title:"Add a line of seats",onSubmit:this.onSubmit,onCancel:this.onCancel},o("div",{class:"row"},o("div",{class:"col"},o(Ot,{name:"add-line-direction",label:"Direction",options:[{label:"Horizontal",value:"horizontal"},{label:"Vertical",value:"vertical"}],value:e.direction,onChange:this.updateDirection}),o(jt,{name:"add-line-number-of-seats",label:"Number of seats",min:1,value:e.numberOfSeats,onChange:this.updateNumberOfSeats}),o(jt,{name:"add-line-spacing",label:"Spacing between seats",min:0,value:e.spacing,onChange:this.updateSpacing}),o(Tt,{name:"add-line-first-letter",label:"First letter",value:e.firstLetter,onChange:this.updateFirstLetter}),o(jt,{name:"add-line-first-number",label:"First number",min:0,value:e.firstNumber,onChange:this.updateFirstNumber}),o(Ot,{name:"add-line-changing",label:"Changing",options:[{label:"Letter",value:"letter"},{label:"Number",value:"number"}],value:e.changing,onChange:this.updateChanging}),o(Ot,{name:"add-line-order",label:"Order",options:[{label:"Ascending",value:"ascending"},{label:"Descending",value:"descending"}],value:e.order,onChange:this.updateOrder}),o(Ot,{name:"add-line-type",label:"Type",options:t.types.map(t=>({label:t.name,value:t.id.toString()})),value:e.type.toString(),onChange:this.updateType}),o(jt,{name:"add-line-seat-width",label:"Seat width",min:0,value:e.seatWidth,onChange:this.updateSeatWidth}),o(jt,{name:"add-line-seat-height",label:"Seat height",min:0,value:e.seatHeight,onChange:this.updateSeatHeight})),o("div",{class:"col"},this.renderPreview(t,e))))}renderPreview(t,e){return o(ct,{seats:Ct(e),types:t.types})}}class Lt extends z{constructor(t){super(t),this.updateNumberOfRows=(t=>this.setState({numberOfRows:t})),this.updateNumberOfColumns=(t=>this.setState({numberOfColumns:t})),this.updateColumnSpacing=(t=>this.setState({columnSpacing:t})),this.updateRowSpacing=(t=>this.setState({rowSpacing:t})),this.updateShift=(t=>this.setState({shift:t})),this.updateFirstLetter=(t=>this.setState({firstLetter:t})),this.updateFirstNumber=(t=>this.setState({firstNumber:t})),this.updateLetterDirection=(t=>this.setState({letterDirection:t})),this.updateLetterOrder=(t=>this.setState({letterOrder:t})),this.updateNumberOrder=(t=>this.setState({numberOrder:t})),this.updateSeatWidth=(t=>this.setState({seatWidth:t})),this.updateSeatHeight=(t=>this.setState({seatHeight:t})),this.updateType=(t=>this.setState({type:parseInt(t,10)})),this.onSubmit=(()=>this.props.onSubmit(this.state)),this.onCancel=(()=>this.props.onCancel()),this.state={numberOfRows:1,numberOfColumns:1,columnSpacing:0,rowSpacing:0,shift:0,firstLetter:"A",firstNumber:1,letterDirection:"horizontal",letterOrder:"ascending",numberOrder:"ascending",type:t.types[0].id,seatWidth:Wt,seatHeight:At}}render(t,e){return o(xt,{title:"Add a grid of seats",onSubmit:this.onSubmit,onCancel:this.onCancel},o("div",{class:"row"},o("div",{class:"col"},o(jt,{name:"add-grid-number-of-rows",label:"Number of rows",min:1,value:e.numberOfRows,onChange:this.updateNumberOfRows}),o(jt,{name:"add-grid-number-of-columns",label:"Number of seats per row",min:1,value:e.numberOfColumns,onChange:this.updateNumberOfColumns}),o(jt,{name:"add-grid-column-spacing",label:"Spacing between two rows",min:0,value:e.columnSpacing,onChange:this.updateColumnSpacing}),o(jt,{name:"add-grid-row-spacing",label:"Spacing between two seats in a row",min:0,value:e.rowSpacing,onChange:this.updateRowSpacing}),o(jt,{name:"add-grid-shift",label:"Shift between two rows",min:0,value:e.shift,onChange:this.updateShift}),o(Tt,{name:"add-grid-first-letter",label:"First letter",value:e.firstLetter,onChange:this.updateFirstLetter}),o(jt,{name:"add-grid-first-number",label:"First number",min:0,value:e.firstNumber,onChange:this.updateFirstNumber}),o(Ot,{name:"add-grid-letter-direction",label:"Letter direction",options:[{label:"Horizontal",value:"horizontal"},{label:"Vertical",value:"vertical"}],value:e.letterDirection,onChange:this.updateLetterDirection}),o(Ot,{name:"add-grid-letter-order",label:"Letter order",options:[{label:"Ascending",value:"ascending"},{label:"Descending",value:"descending"}],value:e.letterOrder,onChange:this.updateLetterOrder}),o(Ot,{name:"add-grid-number-order",label:"Number order",options:[{label:"Ascending",value:"ascending"},{label:"Descending",value:"descending"}],value:e.numberOrder,onChange:this.updateNumberOrder}),o(Ot,{name:"add-grid-type",label:"Type",options:t.types.map(t=>({label:t.name,value:t.id.toString()})),value:e.type.toString(),onChange:this.updateType}),o(jt,{name:"add-grid-seat-width",label:"Seat width",min:0,value:e.seatWidth,onChange:this.updateSeatWidth}),o(jt,{name:"add-grid-seat-height",label:"Seat height",min:0,value:e.seatHeight,onChange:this.updateSeatHeight})),o("div",{class:"col"},this.renderPreview(t,e))))}renderPreview(t,e){return o(ct,{seats:_t(e),types:t.types})}}class zt extends z{constructor(t){super(t),this.updateSeatName=((t,e)=>{this.setState({seats:this.state.seats.map(s=>s.id===t?Object.assign({},s,{name:e}):s)})}),this.onSubmit=(()=>this.props.onSubmit(this.state)),this.onCancel=(()=>this.props.onCancel()),this.state={seats:t.seats.map(t=>({id:t.id,name:t.name,initialName:t.name}))}}render(t,e){return o(xt,{title:"Update seat names",onSubmit:this.onSubmit,onCancel:this.onCancel},e.seats.map(t=>o(Tt,{name:`rename-seat-${t.id}`,label:t.initialName,value:t.name,onChange:e=>this.updateSeatName(t.id,e)})))}}const Nt={id:1,name:"Seat",figure:"rectangle",borderColor:"#000",borderWidth:1,bookable:!0};function Vt(t,e){return t.id===e.id&&t.name===e.name&&t.figure===e.figure&&t.borderColor===e.borderColor&&t.borderWidth===e.borderWidth&&t.bookable===e.bookable}const Ut={seats:[],types:[Nt,{id:2,name:"Stage",figure:"rectangle",borderColor:"#000",borderWidth:5,bookable:!1}]};function Bt(t,e){return t.seats.filter(t=>e.includes(t.id))}function Dt(t,e){return t.seats.filter(t=>(function(t,e){const s=G(t).some(t=>X(t,e)),i=G(e).some(e=>X(e,t)),r=t.x1<=e.x1&&e.x2<=t.x2&&e.y1<=t.y1&&t.y2<=e.y2,n=t.y1<=e.y1&&e.y2<=t.y2&&e.x1<=t.x1&&t.x2<=e.x2;return s||i||r||n})(at(t),J(e)))}function It(t,e){return Object.assign({},t,{seats:t.seats.map(t=>t.id===e.id?Object.assign({},t,e):t)})}function Ft(t,e){return Object.assign({},t,{seats:t.seats.map(t=>{const s=e.find(e=>e.id===t.id);return s?Object.assign({},t,s):t})})}function Kt(t,e){return Object.assign({},t,{seats:[...t.seats,...e]})}function Gt(t,e){return Object.assign({},t,{seats:t.seats.filter(t=>e.every(e=>e!==t.id))})}function Pt(t){return t.types.reduce((t,e)=>Math.max(t,e.id),0)+1}function Rt(t,e){return Object.assign({},t,{types:[...t.types,e]})}function Et(t,e){return Object.assign({},t,{types:t.types.map(t=>t.id===e.id?Object.assign({},t,e):t)})}function Yt(t,e){return Object.assign({},t,{types:t.types.filter(t=>t.id!==e)})}class Jt{constructor(t,e){this.reload=(t=>{this.update({structure:t,selectedSeatIds:[],action:void 0})}),this.startAddSeat=(()=>{this.update({action:q([{id:-1,type:this.state.structure.types[0].id,name:"",x:0,y:0,width:Wt,height:At}])})}),this.startAddLine=(()=>{(function(t){return mt($t,{types:t})})(this.state.structure.types).then(t=>{this.update({action:q(Ct(t))})})}),this.startAddGrid=(()=>{(function(t){return mt(Lt,{types:t})})(this.state.structure.types).then(t=>{this.update({action:q(_t(t))})})}),this.renameSeat=(t=>{this.renameSeats([t])}),this.renameSelectedSeats=(()=>{this.renameSeats(this.state.selectedSeatIds)}),this.renameSeats=(t=>{const e=Bt(this.state.structure,t);e.length>0&&function(t){return mt(zt,{seats:t})}(e).then(({seats:t})=>{this.update({structure:Ft(this.state.structure,t)})})}),this.removeSeats=(()=>{this.update({structure:Gt(this.state.structure,this.state.selectedSeatIds),selectedSeatIds:[]})}),this.selectSeat=((t,e)=>{e?this.update({selectedSeatIds:[...this.state.selectedSeatIds,t]}):this.update({selectedSeatIds:[t]})}),this.deselectAllSeats=(()=>{this.update({selectedSeatIds:[]})}),this.startZoneSelection=(t=>{this.update({action:st({x1:this.state.mousePosition.x,y1:this.state.mousePosition.y,x2:this.state.mousePosition.x,y2:this.state.mousePosition.y},t.ctrlKey)})}),this.startMoveSeats=(()=>{const t=K(this.getSelectedSeats().map(at));this.update({action:tt(this.getSelectedSeats().map(e=>F(e,D({x:t.x1,y:t.y1}))),P(t),B(P(t),this.state.mousePosition))})}),this.getSelectedSeats=(()=>Bt(this.state.structure,this.state.selectedSeatIds)),this.confirmAction=(()=>{const t=this.state.action;if(t)switch(t.type){case"addingSeats":const e=function(t){return t.seats.reduce((t,e)=>Math.max(t,e.id),0)+1}(this.state.structure);this.update({structure:Kt(this.state.structure,t.seats.map((s,i)=>({id:e+i,type:s.type,name:s.name,x:Math.round(s.x+t.position.x),y:Math.round(s.y+t.position.y),width:s.width,height:s.height}))),action:void 0});break;case"movingSeats":this.update({structure:Ft(this.state.structure,t.seats.map(e=>F(e,t.position))),action:void 0});break;case"zoneSelection":const s=Dt(this.state.structure,t.zone).map(t=>t.id);this.update({selectedSeatIds:t.additionalSeats?[...this.state.selectedSeatIds,...s]:s,action:void 0})}}),this.cancelAction=(()=>{this.state.action&&nt(this.state.action)?this.update({translation:this.state.action.mapStartingPosition,action:void 0}):this.update({selectedSeatIds:[],action:void 0})}),this.updateMousePosition=(t=>{const e=U(t,D(this.state.translation));this.update({mousePosition:e});const s=this.state.action;if(s)if(Z(s)){const t=ot(Q(s));this.update({action:Object.assign({},s,{position:{x:e.x-t.width/2,y:e.y-t.height/2}})})}else if(et(s)){const t=U(e,D(s.positionInAction)),i=K(s.seats.map(at)),r=function(t,e){return{x:ft(t,e),y:gt(t,e)}}(I(i,t),I(i,s.initialPosition));this.update({action:Object.assign({},s,{position:U(t,r)})})}else it(s)?this.update({action:Object.assign({},s,{zone:Object.assign({},s.zone,{x2:e.x,y2:e.y})})}):nt(s)&&this.update({translation:U(s.mapStartingPosition,B(s.clientStartingPosition,t))})}),this.startGraping=(t=>{this.update({action:rt(t,this.state.translation)})}),this.endGraping=(()=>{this.state.action&&nt(this.state.action)&&this.update({action:void 0})}),this.updateSeat=(t=>{this.update({structure:It(this.state.structure,t)})}),this.updateSelectedSeats=(t=>{this.update({structure:Ft(this.state.structure,Bt(this.state.structure,this.state.selectedSeatIds).map(e=>Object.assign({},t,{id:e.id})))})}),this.addType=(()=>{this.update({structure:Rt(this.state.structure,Object.assign({},Nt,{id:Pt(this.state.structure)}))})}),this.updateType=(t=>{this.update({structure:Et(this.state.structure,t)})}),this.removeType=(t=>{this.update({structure:Yt(this.state.structure,t)})}),this.state=t,this.listener=e,this.listener(this.state)}update(t){this.state=Object.assign({},this.state,t),this.listener(this.state)}}function Xt(t){const e=t.state.action;return void 0!==e?o("g",{id:"shadow"},et(e)?function(t){const e=ot(I(K(t.seats.map(at)),t.initialPosition));return o("rect",Object.assign({x:e.x,y:e.y,width:e.width,height:e.height,fill:"transparent",stroke:"#aaa"},{"stroke-dasharray":"3 2"}))}(e):void 0,Z(e)||et(e)?function(t,e){const s=ot(Q(t));return o("g",{onMouseUp:e.confirmAction},o("rect",{x:s.x+t.position.x,y:s.y+t.position.y,width:s.width,height:s.height,fill:"transparent",stroke:"transparent"}),t.seats.map(e=>F(e,t.position)).map(t=>(function(t,e){return"rectangle"===function(t,e){const s=e.state.structure.types.find(e=>e.id===t.type);return void 0!==s?s.figure:"rectangle"}(t,e)?o("rect",Object.assign({x:t.x,y:t.y,width:t.width,height:t.height,fill:"transparent",strokeWidth:1,stroke:"#555"},{"stroke-dasharray":"5 2"})):o("ellipse",Object.assign({cx:t.x+t.width/2,cy:t.y+t.height/2,rx:t.width/2,ry:t.height/2,fill:"transparent",strokeWidth:1,stroke:"#555"},{"stroke-dasharray":"5 2"}))})(t,e)))}(e,t):void 0,Z(e)||et(e)?(s=I(Q(e),e.position),t.state.structure.seats.flatMap(t=>{const e=[],i=Math.min(t.x,s.x1)-10,r=Math.min(t.y,s.y1)-10,n=Math.max(t.x+t.width,s.x2)+10,a=Math.max(t.y+t.height,s.y2)+10;return ut(t.x,s.x1)&&e.push({x1:t.x,y1:r,x2:t.x,y2:a}),ut(t.x+t.width,s.x2)&&e.push({x1:t.x+t.width,y1:r,x2:t.x+t.width,y2:a}),ut(t.x+t.width,s.x1)&&e.push({x1:s.x1,y1:r,x2:s.x1,y2:a}),ut(t.x,s.x2)&&e.push({x1:t.x,y1:r,x2:t.x,y2:a}),ut(t.y,s.y1)&&e.push({x1:i,y1:t.y,x2:n,y2:t.y}),ut(t.y+t.height,s.y2)&&e.push({x1:i,y1:t.y+t.height,x2:n,y2:t.y+t.height}),ut(t.y+t.height,s.y1)&&e.push({x1:i,y1:s.y1,x2:n,y2:s.y1}),ut(t.y,s.y2)&&e.push({x1:i,y1:t.y,x2:n,y2:t.y}),e}).map(t=>o("line",{x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,stroke:"#aaa"}))):void 0,it(e)?function(t,e){const s=ot(J(t.zone));return o("rect",{x:s.x,y:s.y,width:s.width,height:s.height,fill:"transparent",stroke:"#aaa",onMouseUp:e})}(e,t.confirmAction):void 0):o("g",{id:"shadow"});var s}class Qt extends z{constructor(t){super(t),this.renderRectangle=(t=>{const e=this.getType();return o("rect",Object.assign({x:t.x,y:t.y,width:t.width,height:t.height,fill:this.isSelected()?"#ccc":"#fff",stroke:e.borderColor},{"stroke-width":e.borderWidth}))}),this.renderCircle=(t=>{const e=this.getType();return o("ellipse",Object.assign({cx:t.x+t.width/2,cy:t.y+t.height/2,rx:t.width/2,ry:t.height/2,fill:this.isSelected()?"#ccc":"#fff",stroke:e.borderColor},{"stroke-width":e.borderWidth}))}),this.isSelected=(()=>this.props.storeState.selectedSeatIds.includes(this.props.seat.id)),this.getType=(()=>{const t=this.props.storeState.structure.types.find(t=>t.id===this.props.seat.type);return void 0!==t?t:{id:-1,name:"",figure:"rectangle",borderColor:"#000",borderWidth:1}}),this.onClick=(t=>{this.props.selectSeat(this.props.seat.id,t.ctrlKey)}),this.onMouseDown=(()=>{this.isSelected()&&this.props.startMoveSeats()})}render({seat:t}){return o("g",{id:`seat-${t.id}`,onClick:this.onClick,onMouseDown:this.onMouseDown},"rectangle"===this.getType().figure?this.renderRectangle(t):this.renderCircle(t),o("text",Object.assign({x:t.x+t.width/2,y:t.y+t.height/2},{"dominant-baseline":"middle","text-anchor":"middle"}),t.name))}}function qt(t){const{state:e,confirmAction:s}=t;return o("svg",{class:(i=["map",t.state.action?"map-action":void 0],i.filter(t=>void 0!==t)).join(" "),onClick:yt(t.deselectAllSeats),onMouseDown:yt(t.startZoneSelection),onMouseUp:yt(t.confirmAction)},o("g",{transform:`translate(${e.translation.x}, ${e.translation.y})`},e.structure.seats.map(e=>o(Qt,{storeState:t.state,seat:e,selectSeat:t.selectSeat,startMoveSeats:t.startMoveSeats,renameSeat:t.renameSeat})),o(Xt,{state:e,confirmAction:s})));var i}function Zt(){return o("style",null,lt(Object.assign({":host, .host":{display:"flex",flexDirection:"column",alignItems:"stretch",width:"100%",height:"100%",outline:"none"},".toolbar":{display:"flex",flexDirection:"row",justifyContent:"center"},".row":{flexGrow:1,display:"flex",alignItems:"stretch"},".map-container":{display:"flex",alignItems:"stretch",position:"relative",height:"100%"},".map":{flexGrow:1,cursor:"default",MozUserSelect:"none",WebkitUserSelect:"none",msUserSelect:"none",userSelect:"none"},".map:not(.map-action) rect, .map ellipse, .map text":{cursor:"pointer"},".right-panel":{flex:"350px 0 0",margin:"1rem",boxShadow:"0 0 2px #aaa",maxHeight:"calc(100vh - 40px - 2rem)",overflow:"auto"},".right-panel section, .right-panel h3":{margin:"1rem 0",padding:"0 0.5rem"},".right-panel details":{padding:"0 1rem",border:"1px solid #ccc"},".right-panel details:not(:first-of-type)":{borderTop:"none"},".right-panel details summary":{padding:"0.25rem",cursor:"pointer",outline:"none"},".icon-button":{display:"inline-flex",alignItems:"center",justifyContent:"center",border:"none",backgroundColor:"#fff",cursor:"pointer",padding:"0.5rem",transition:"all 0.25s ease-in-out"},".icon-button:hover":{backgroundColor:"#ddd"}},bt)))}function te(t){return o("button",{class:"icon-button",title:t.label,onClick:t.onClick},t.children)}function ee(t){return"small"===t?"16px":"24px"}var se=function({size:t}){return o("svg",{"enable-background":"new 0 0 96 96",width:ee(t),height:ee(t),id:"stack",version:"1.1",viewBox:"0 0 96 96"},o("path",{d:"M80,4H44c-6.63,0-12,5.37-12,12v16H16C9.37,32,4,37.37,4,44v36c0,6.63,5.37,12,12,12h36c6.63,0,12-5.37,12-12V64h16  c6.63,0,12-5.37,12-12V16C92,9.37,86.63,4,80,4z M56,80c0,2.21-1.79,4-4,4H16c-2.21,0-4-1.79-4-4V44c0-2.21,1.79-4,4-4h16v12  c0,6.63,5.37,12,12,12h12V80z M84,52c0,2.21-1.79,4-4,4H44c-2.21,0-4-1.79-4-4V16c0-2.21,1.79-4,4-4h36c2.21,0,4,1.79,4,4V52z"}))},ie=function({size:t}){return o("svg",{"enable-background":"new 0 0 96 96",width:ee(t),height:ee(t),id:"circle_add",version:"1.1",viewBox:"0 0 96 96"},o("path",{d:"M48,4C23.7,4,4,23.699,4,48s19.7,44,44,44s44-19.699,44-44S72.3,4,48,4z M48,84c-19.882,0-36-16.118-36-36s16.118-36,36-36  s36,16.118,36,36S67.882,84,48,84z"}),o("path",{d:"M64,44H52V32c0-2.209-1.791-4-4-4s-4,1.791-4,4v12H32c-2.209,0-4,1.791-4,4s1.791,4,4,4h12v12c0,2.209,1.791,4,4,4  s4-1.791,4-4V52h12c2.209,0,4-1.791,4-4S66.209,44,64,44z"}))},re=function({size:t}){return o("svg",{"enable-background":"new 0 0 96 96",width:ee(t),height:ee(t),id:"grid",version:"1.1",viewBox:"0 0 96 96"},o("path",{d:"M32,4H16C9.37,4,4,9.37,4,16v16c0,6.63,5.37,12,12,12h16c6.63,0,12-5.37,12-12V16C44,9.37,38.63,4,32,4z M36,32  c0,2.21-1.79,4-4,4H16c-2.21,0-4-1.79-4-4V16c0-2.21,1.79-4,4-4h16c2.21,0,4,1.79,4,4V32z"}),o("path",{d:"M80,4H64c-6.63,0-12,5.37-12,12v16c0,6.63,5.37,12,12,12h16c6.63,0,12-5.37,12-12V16C92,9.37,86.63,4,80,4z M84,32  c0,2.21-1.79,4-4,4H64c-2.21,0-4-1.79-4-4V16c0-2.21,1.79-4,4-4h16c2.21,0,4,1.79,4,4V32z"}),o("path",{d:"M80,52H64c-6.63,0-12,5.37-12,12v16c0,6.63,5.37,12,12,12h16c6.63,0,12-5.37,12-12V64C92,57.37,86.63,52,80,52z M84,80  c0,2.21-1.79,4-4,4H64c-2.21,0-4-1.79-4-4V64c0-2.21,1.79-4,4-4h16c2.21,0,4,1.79,4,4V80z"}),o("path",{d:"M32,52H16C9.37,52,4,57.37,4,64v16c0,6.63,5.37,12,12,12h16c6.63,0,12-5.37,12-12V64C44,57.37,38.63,52,32,52z M36,80  c0,2.21-1.79,4-4,4H16c-2.21,0-4-1.79-4-4V64c0-2.21,1.79-4,4-4h16c2.21,0,4,1.79,4,4V80z"}))},ne=function({size:t}){return o("svg",{fill:"none",width:ee(t),height:ee(t),stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"},o("rect",{height:"18",rx:"2",ry:"2",width:"18",x:"3",y:"3"}),o("line",{x1:"12",x2:"12",y1:"8",y2:"16"}),o("line",{x1:"8",x2:"16",y1:"12",y2:"12"}))},ae=function({size:t}){return o("svg",{"enable-background":"new 0 0 96 96",width:ee(t),height:ee(t),id:"circle_cross",version:"1.1",viewBox:"0 0 96 96"},o("path",{d:"M48,4C23.7,4,4,23.699,4,48s19.7,44,44,44s44-19.699,44-44S72.3,4,48,4z M48,84c-19.882,0-36-16.118-36-36s16.118-36,36-36  s36,16.118,36,36S67.882,84,48,84z"}),o("path",{d:"M53.657,48l8.485-8.485c1.562-1.562,1.562-4.095,0-5.656c-1.562-1.562-4.096-1.562-5.658,0L48,42.343l-8.485-8.484  c-1.562-1.562-4.095-1.562-5.657,0c-1.562,1.562-1.562,4.096,0,5.656L42.343,48l-8.485,8.485c-1.562,1.562-1.562,4.095,0,5.656  c1.562,1.562,4.095,1.562,5.657,0L48,53.657l8.484,8.484c1.562,1.562,4.096,1.562,5.658,0c1.562-1.562,1.562-4.096,0-5.656  L53.657,48z"}))},oe=function({size:t}){return o("svg",{fill:"none",width:ee(t),height:ee(t),stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"},o("polygon",{points:"16 3 21 8 8 21 3 21 3 16 16 3"}))},ce=function({size:t}){return o("svg",{fill:"none",width:ee(t),height:ee(t),stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"},o("polyline",{points:"3 6 5 6 21 6"}),o("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),o("line",{x1:"10",x2:"10",y1:"11",y2:"17"}),o("line",{x1:"14",x2:"14",y1:"11",y2:"17"}))};function le({add:t,startAddLine:e,startAddGrid:s,renameSelectedSeat:i,removeSeat:r,cancelAction:n}){return o("div",{class:"toolbar"},o(te,{label:"Add a seat",onClick:t},o(ne,null)),o(te,{label:"Add a line of seats",onClick:e},o(se,null)),o(te,{label:"Add a grid of seats",onClick:s},o(re,null)),o(te,{label:"Rename",onClick:i},o(oe,null)),o(te,{label:"Remove seat",onClick:r},o(ce,null)),o(te,{label:"Cancel current action",onClick:n},o(ae,null)))}class de extends z{constructor(t){super(t),this.onInput=(t=>{const e=t.target;this.props.onChange(e.value)})}render(t){return o("div",{class:"field"},o("label",{for:t.name,class:"field-label"},t.label),o("p",{class:"field-input"},o("input",{type:"color",name:t.name,id:t.name,value:t.value,onInput:this.onInput})))}}function he(t){return o("div",{className:"right-panel"},o("h3",null,"Types of seats"),t.state.structure.types.map(e=>(function(t,e){return o("details",{key:`type-${t.id.toString()}`},o("summary",null,e.state.structure.types.length>1?o(te,{label:"Remove",onClick:()=>e.removeType(t.id)},o(ce,{size:"small"})):void 0,t.name),o(Tt,{name:`right-panel-type-${t.id}-name`,label:"Type name",value:t.name,onChange:s=>e.updateType(Object.assign({},t,{name:s}))}),o(Ot,{name:`right-panel-type-${t.id}-figure`,label:"Figure",options:[{label:"Rectangle",value:"rectangle"},{label:"Circle",value:"circle"}],value:t.figure,onChange:s=>e.updateType(Object.assign({},t,{figure:s}))}),o(de,{name:`right-panel-type-${t.id}-border-color`,label:"Border color",value:t.borderColor,onChange:s=>e.updateType(Object.assign({},t,{borderColor:s}))}),o(jt,{name:`right-panel-type-${t.id}-border-width`,label:"Border width",value:t.borderWidth,onChange:s=>e.updateType(Object.assign({},t,{borderWidth:s}))}),o(Ot,{name:`right-panel-type-${t.id}-bookable`,label:"Bookable",options:[{label:"Yes",value:"true"},{label:"No",value:"false"}],value:t.bookable.toString(),onChange:s=>e.updateType(Object.assign({},t,{bookable:"true"===s}))}))})(e,t)),o("section",null,o(te,{label:"New type",onClick:t.addType},o(ie,null))))}function ue(t){const e=t.state.structure.seats.filter(e=>t.state.selectedSeatIds.includes(e.id));return o("div",{className:"right-panel"},o("h3",null,"Selected seats"),function(t,e){return o("section",null,o(Ot,{name:"right-panel-seat-all-seats-type",label:"Type of selected seats",options:e.state.structure.types.map(t=>({label:t.name,value:t.id.toString()})),value:t[0].type.toString(),onChange:t=>e.updateSelectedSeats({type:parseInt(t,10)})}))}(e,t),e.map(e=>(function(t,e){return o("details",{key:`seat-${t.id.toString()}`},o("summary",null,t.name),o(Tt,{name:`right-panel-seat-${t.id}-name`,label:"Seat name",value:t.name,onChange:s=>e.updateSeat(Object.assign({},t,{name:s}))}),o(Ot,{name:`right-panel-seat-${t.id}-type`,label:"Type",options:e.state.structure.types.map(t=>({label:t.name,value:t.id.toString()})),value:t.type.toString(),onChange:s=>e.updateSeat(Object.assign({},t,{type:parseInt(s,10)}))}),o(jt,{name:`right-panel-seat-${t.id}-pos-x`,label:"X position",value:t.x,onChange:s=>e.updateSeat(Object.assign({},t,{x:s}))}),o(jt,{name:`right-panel-seat-${t.id}-pos-y`,label:"Y position",value:t.y,onChange:s=>e.updateSeat(Object.assign({},t,{y:s}))}),o(jt,{name:`right-panel-seat-${t.id}-width`,label:"Width",value:t.width,onChange:s=>e.updateSeat(Object.assign({},t,{width:s}))}),o(jt,{name:`right-panel-seat-${t.id}-height`,label:"Height",value:t.height,onChange:s=>e.updateSeat(Object.assign({},t,{height:s}))}))})(e,t)))}function pe(t){return 0===t.state.selectedSeatIds.length?o(he,{state:t.state,addType:t.addType,updateType:t.updateType,removeType:t.removeType}):o(ue,{state:t.state,updateSeat:t.updateSeat,updateSelectedSeats:t.updateSelectedSeats})}class fe extends z{constructor(t){super(t),this.onStoreUpdate=(t=>{(void 0===this.state.state||function(t,e){return!wt(t.seats,e.seats,Ht)||!wt(t.types,e.types,Vt)}(t.structure,this.state.state.structure))&&this.props.onChange(t.structure),this.setState({state:t})}),this.mousemove=(t=>this.store.updateMousePosition({x:t.clientX-t.currentTarget.offsetLeft+document.body.scrollLeft,y:t.clientY-t.currentTarget.offsetTop+document.body.scrollTop})),this.mousedown=(t=>{t.shiftKey&&this.store.startGraping({x:t.clientX-t.currentTarget.offsetLeft+document.body.scrollLeft,y:t.clientY-t.currentTarget.offsetTop+document.body.scrollTop})}),this.mouseup=(()=>this.store.endGraping()),this.onKeyPress=(t=>{switch(t.key){case"Escape":this.store.cancelAction();break;case"Backspace":case"Delete":this.store.removeSeats();break;case"r":case"R":t.ctrlKey||t.altKey||this.store.renameSelectedSeats()}}),this.store=new Jt({structure:t.initialStructure||Ut,selectedSeatIds:[],translation:V,mousePosition:V},this.onStoreUpdate)}componentWillReceiveProps(t){this.store.reload(t.initialStructure||Ut)}render({},t){return o("div",{class:"host",onKeyPress:this.onKeyPress,tabIndex:-1},o(Zt,null),o(le,{add:this.store.startAddSeat,startAddLine:this.store.startAddLine,startAddGrid:this.store.startAddGrid,renameSelectedSeat:this.store.renameSelectedSeats,removeSeat:this.store.removeSeats,cancelAction:this.store.cancelAction}),o("div",{class:"row"},o("div",{class:"map-container",onMouseMove:this.mousemove,onMouseDown:this.mousedown,onMouseUp:this.mouseup},o(qt,{state:t.state,selectSeat:this.store.selectSeat,deselectAllSeats:this.store.deselectAllSeats,startZoneSelection:this.store.startZoneSelection,startMoveSeats:this.store.startMoveSeats,renameSeat:this.store.renameSeat,confirmAction:this.store.confirmAction})),o(pe,{state:t.state,updateSeat:this.store.updateSeat,updateSelectedSeats:this.store.updateSelectedSeats,addType:this.store.addType,updateType:this.store.updateType,removeType:this.store.removeType})))}}function ge(t){return{seats:t.seats.map(ye),types:t.types.map(be)}}function ye(t){return{id:t.id,type:t.type,name:t.name,x:t.x,y:t.y,width:t.width,height:t.height}}function be(t){return{id:t.id,name:t.name,figure:"rectangle"===t.figure||"circle"===t.figure?t.figure:"rectangle",borderColor:t.borderColor,borderWidth:t.borderWidth,bookable:t.bookable}}function me(t){return{version:"0.1.0",seats:t.seats.map(xe),types:t.types.map(Se)}}function xe(t){return{id:t.id,type:t.type,name:t.name,x:t.x,y:t.y,width:t.width,height:t.height}}function Se(t){return{id:t.id,name:t.name,figure:t.figure,borderColor:t.borderColor,borderWidth:t.borderWidth,bookable:t.bookable}}s.d(e,"SeatMapperChangeEvent",function(){return we});class we extends Event{constructor(t){super("change"),this.structure=Object.freeze(Object.assign({},t))}}customElements.define("seat-mapper",class extends HTMLElement{constructor(){super(),this.shadow=this.attachShadow({mode:"open"})}static get observedAttributes(){return["initial-structure"]}connectedCallback(){this.render()}attributeChangedCallback(){this.render()}render(){this.isConnected&&(this.currentElement=N(o(fe,this.getProps()),this.shadow,this.currentElement))}getProps(){const t=this.getAttribute("initial-structure"),e=null!==t?JSON.parse(t):void 0;return{initialStructure:void 0!==e?function(t){switch(t.version||""){case"0.1.0":default:return ge(t)}}(e):void 0,onChange:t=>{const e=this.getAttribute("version")||void 0;this.dispatchEvent(new we(function(t,e){switch(e||""){case"0.1.0":default:return me(t)}}(t||Ut,e)))}}}})}]);