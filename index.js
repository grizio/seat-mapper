!function(t){var e={};function r(i){if(e[i])return e[i].exports;var a=e[i]={i:i,l:!1,exports:{}};return t[i].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=e,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(i,a,function(e){return t[e]}.bind(null,a));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){"use strict";r.r(e);const i={x:0,y:0};function a(t,e){return{x:t.x+e.x,y:t.y+e.y}}function n(t,e){return{x:e.x-t.x,y:e.y-t.y}}function s(t){return{x:-t.x,y:-t.y}}function o(t,e){return{x1:t.x1+e.x,y1:t.y1+e.y,x2:t.x2+e.x,y2:t.y2+e.y}}function d(t,e){return Object.assign({},t,{x:Math.round(t.x+e.x),y:Math.round(t.y+e.y)})}function l(t){if(0===t.length)return{x1:0,y1:0,x2:0,y2:0};{const e=t[0];return t.slice(1).reduce((t,e)=>({x1:Math.min(t.x1,e.x1),y1:Math.min(t.y1,e.y1),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),e)}}function c(t){return[u(t),h(t),p(t),g(t)]}function u(t){return{x:t.x1,y:t.y1}}function h(t){return{x:t.x2,y:t.y1}}function p(t){return{x:t.x1,y:t.y2}}function g(t){return{x:t.x2,y:t.y2}}function f(t){return{x1:Math.min(t.x1,t.x2),y1:Math.min(t.y1,t.y2),x2:Math.max(t.x1,t.x2),y2:Math.max(t.y1,t.y2)}}function b(t,e){return e.x1<=t.x&&t.x<=e.x2&&e.y1<=t.y&&t.y<=e.y2}var y=function(){},m={},x=[],S=[];function M(t,e){var r,i,a,n,s=S;for(n=arguments.length;n-- >2;)x.push(arguments[n]);for(e&&null!=e.children&&(x.length||x.push(e.children),delete e.children);x.length;)if((i=x.pop())&&void 0!==i.pop)for(n=i.length;n--;)x.push(i[n]);else"boolean"==typeof i&&(i=null),(a="function"!=typeof t)&&(null==i?i="":"number"==typeof i?i=String(i):"string"!=typeof i&&(a=!1)),a&&r?s[s.length-1]+=i:s===S?s=[i]:s.push(i),r=a;var o=new y;return o.nodeName=t,o.children=s,o.attributes=null==e?void 0:e,o.key=null==e?void 0:e.key,void 0!==m.vnode&&m.vnode(o),o}function w(t,e){for(var r in e)t[r]=e[r];return t}function v(t,e){null!=t&&("function"==typeof t?t(e):t.current=e)}var C="function"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout;var O=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,k=[];function L(t){!t._dirty&&(t._dirty=!0)&&1==k.push(t)&&(m.debounceRendering||C)(G)}function G(){for(var t;t=k.pop();)t._dirty&&E(t)}function P(t,e){return t.normalizedNodeName===e||t.nodeName.toLowerCase()===e.toLowerCase()}function _(t){var e=w({},t.attributes);e.children=t.children;var r=t.nodeName.defaultProps;if(void 0!==r)for(var i in r)void 0===e[i]&&(e[i]=r[i]);return e}function j(t){var e=t.parentNode;e&&e.removeChild(t)}function T(t,e,r,i,a){if("className"===e&&(e="class"),"key"===e)   ;else if("ref"===e)v(r,null),v(i,t);else if("class"!==e||a)if("style"===e){if(i&&"string"!=typeof i&&"string"!=typeof r||(t.style.cssText=i||""),i&&"object"==typeof i){if("string"!=typeof r)for(var n in r)n in i||(t.style[n]="");for(var n in i)t.style[n]="number"==typeof i[n]&&!1===O.test(n)?i[n]+"px":i[n]}}else if("dangerouslySetInnerHTML"===e)i&&(t.innerHTML=i.__html||"");else if("o"==e[0]&&"n"==e[1]){var s=e!==(e=e.replace(/Capture$/,""));e=e.toLowerCase().substring(2),i?r||t.addEventListener(e,A,s):t.removeEventListener(e,A,s),(t._listeners||(t._listeners={}))[e]=i}else if("list"!==e&&"type"!==e&&!a&&e in t){try{t[e]=null==i?"":i}catch(t){}null!=i&&!1!==i||"spellcheck"==e||t.removeAttribute(e)}else{var o=a&&e!==(e=e.replace(/^xlink:?/,""));null==i||!1===i?o?t.removeAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase()):t.removeAttribute(e):"function"!=typeof i&&(o?t.setAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase(),i):t.setAttribute(e,i))}else t.className=i||""}function A(t){return this._listeners[t.type](m.event&&m.event(t)||t)}var N=[],H=0,W=!1,z=!1;function D(){for(var t;t=N.shift();)m.afterMount&&m.afterMount(t),t.componentDidMount&&t.componentDidMount()}function $(t,e,r,i,a,n){H++||(W=null!=a&&void 0!==a.ownerSVGElement,z=null!=t&&!("__preactattr_"in t));var s=V(t,e,r,i,n);return a&&s.parentNode!==a&&a.appendChild(s),--H||(z=!1,n||D()),s}function V(t,e,r,i,a){var n=t,s=W;if(null!=e&&"boolean"!=typeof e||(e=""),"string"==typeof e||"number"==typeof e)return t&&void 0!==t.splitText&&t.parentNode&&(!t._component||a)?t.nodeValue!=e&&(t.nodeValue=e):(n=document.createTextNode(e),t&&(t.parentNode&&t.parentNode.replaceChild(n,t),B(t,!0))),n.__preactattr_=!0,n;var o,d,l=e.nodeName;if("function"==typeof l)return function(t,e,r,i){var a=t&&t._component,n=a,s=t,o=a&&t._componentConstructor===e.nodeName,d=o,l=_(e);for(;a&&!d&&(a=a._parentComponent);)d=a.constructor===e.nodeName;a&&d&&(!i||a._component)?(K(a,l,3,r,i),t=a.base):(n&&!o&&(Y(n),t=s=null),a=F(e.nodeName,l,r),t&&!a.nextBase&&(a.nextBase=t,s=null),K(a,l,1,r,i),t=a.base,s&&t!==s&&(s._component=null,B(s,!1)));return t}(t,e,r,i);if(W="svg"===l||"foreignObject"!==l&&W,l=String(l),(!t||!P(t,l))&&(o=l,(d=W?document.createElementNS("http://www.w3.org/2000/svg",o):document.createElement(o)).normalizedNodeName=o,n=d,t)){for(;t.firstChild;)n.appendChild(t.firstChild);t.parentNode&&t.parentNode.replaceChild(n,t),B(t,!0)}var c=n.firstChild,u=n.__preactattr_,h=e.children;if(null==u){u=n.__preactattr_={};for(var p=n.attributes,g=p.length;g--;)u[p[g].name]=p[g].value}return!z&&h&&1===h.length&&"string"==typeof h[0]&&null!=c&&void 0!==c.splitText&&null==c.nextSibling?c.nodeValue!=h[0]&&(c.nodeValue=h[0]):(h&&h.length||null!=c)&&function(t,e,r,i,a){var n,s,o,d,l,c=t.childNodes,u=[],h={},p=0,g=0,f=c.length,b=0,y=e?e.length:0;if(0!==f)for(var m=0;m<f;m++){var x=c[m],S=x.__preactattr_,M=y&&S?x._component?x._component.__key:S.key:null;null!=M?(p++,h[M]=x):(S||(void 0!==x.splitText?!a||x.nodeValue.trim():a))&&(u[b++]=x)}if(0!==y)for(var m=0;m<y;m++){d=e[m],l=null;var M=d.key;if(null!=M)p&&void 0!==h[M]&&(l=h[M],h[M]=void 0,p--);else if(g<b)for(n=g;n<b;n++)if(void 0!==u[n]&&(w=s=u[n],C=a,"string"==typeof(v=d)||"number"==typeof v?void 0!==w.splitText:"string"==typeof v.nodeName?!w._componentConstructor&&P(w,v.nodeName):C||w._componentConstructor===v.nodeName)){l=s,u[n]=void 0,n===b-1&&b--,n===g&&g++;break}l=V(l,d,r,i),o=c[m],l&&l!==t&&l!==o&&(null==o?t.appendChild(l):l===o.nextSibling?j(o):t.insertBefore(l,o))}var w,v,C;if(p)for(var m in h)void 0!==h[m]&&B(h[m],!1);for(;g<=b;)void 0!==(l=u[b--])&&B(l,!1)}(n,h,r,i,z||null!=u.dangerouslySetInnerHTML),function(t,e,r){var i;for(i in r)e&&null!=e[i]||null==r[i]||T(t,i,r[i],r[i]=void 0,W);for(i in e)"children"===i||"innerHTML"===i||i in r&&e[i]===("value"===i||"checked"===i?t[i]:r[i])||T(t,i,r[i],r[i]=e[i],W)}(n,e.attributes,u),W=s,n}function B(t,e){var r=t._component;r?Y(r):(null!=t.__preactattr_&&v(t.__preactattr_.ref,null),!1!==e&&null!=t.__preactattr_||j(t),U(t))}function U(t){for(t=t.lastChild;t;){var e=t.previousSibling;B(t,!0),t=e}}var I=[];function F(t,e,r){var i,a=I.length;for(t.prototype&&t.prototype.render?(i=new t(e,r),J.call(i,e,r)):((i=new J(e,r)).constructor=t,i.render=R);a--;)if(I[a].constructor===t)return i.nextBase=I[a].nextBase,I.splice(a,1),i;return i}function R(t,e,r){return this.constructor(t,r)}function K(t,e,r,i,a){t._disable||(t._disable=!0,t.__ref=e.ref,t.__key=e.key,delete e.ref,delete e.key,void 0===t.constructor.getDerivedStateFromProps&&(!t.base||a?t.componentWillMount&&t.componentWillMount():t.componentWillReceiveProps&&t.componentWillReceiveProps(e,i)),i&&i!==t.context&&(t.prevContext||(t.prevContext=t.context),t.context=i),t.prevProps||(t.prevProps=t.props),t.props=e,t._disable=!1,0!==r&&(1!==r&&!1===m.syncComponentUpdates&&t.base?L(t):E(t,1,a)),v(t.__ref,t))}function E(t,e,r,i){if(!t._disable){var a,n,s,o=t.props,d=t.state,l=t.context,c=t.prevProps||o,u=t.prevState||d,h=t.prevContext||l,p=t.base,g=t.nextBase,f=p||g,b=t._component,y=!1,x=h;if(t.constructor.getDerivedStateFromProps&&(d=w(w({},d),t.constructor.getDerivedStateFromProps(o,d)),t.state=d),p&&(t.props=c,t.state=u,t.context=h,2!==e&&t.shouldComponentUpdate&&!1===t.shouldComponentUpdate(o,d,l)?y=!0:t.componentWillUpdate&&t.componentWillUpdate(o,d,l),t.props=o,t.state=d,t.context=l),t.prevProps=t.prevState=t.prevContext=t.nextBase=null,t._dirty=!1,!y){a=t.render(o,d,l),t.getChildContext&&(l=w(w({},l),t.getChildContext())),p&&t.getSnapshotBeforeUpdate&&(x=t.getSnapshotBeforeUpdate(c,u));var S,M,v=a&&a.nodeName;if("function"==typeof v){var C=_(a);(n=b)&&n.constructor===v&&C.key==n.__key?K(n,C,1,l,!1):(S=n,t._component=n=F(v,C,l),n.nextBase=n.nextBase||g,n._parentComponent=t,K(n,C,0,l,!1),E(n,1,r,!0)),M=n.base}else s=f,(S=b)&&(s=t._component=null),(f||1===e)&&(s&&(s._component=null),M=$(s,a,l,r||!p,f&&f.parentNode,!0));if(f&&M!==f&&n!==b){var O=f.parentNode;O&&M!==O&&(O.replaceChild(M,f),S||(f._component=null,B(f,!1)))}if(S&&Y(S),t.base=M,M&&!i){for(var k=t,L=t;L=L._parentComponent;)(k=L).base=M;M._component=k,M._componentConstructor=k.constructor}}for(!p||r?N.push(t):y||(t.componentDidUpdate&&t.componentDidUpdate(c,u,x),m.afterUpdate&&m.afterUpdate(t));t._renderCallbacks.length;)t._renderCallbacks.pop().call(t);H||i||D()}}function Y(t){m.beforeUnmount&&m.beforeUnmount(t);var e=t.base;t._disable=!0,t.componentWillUnmount&&t.componentWillUnmount(),t.base=null;var r=t._component;r?Y(r):e&&(null!=e.__preactattr_&&v(e.__preactattr_.ref,null),t.nextBase=e,j(e),I.push(t),U(e)),v(t.__ref,null)}function J(t,e){this._dirty=!0,this.context=e,this.props=t,this.state=this.state||{},this._renderCallbacks=[]}function X(t,e,r){return $(r,t,{},!1,e,!1)}w(J.prototype,{setState:function(t,e){this.prevState||(this.prevState=this.state),this.state=w(w({},this.state),"function"==typeof t?t(this.state,this.props):t),e&&this._renderCallbacks.push(e),L(this)},forceUpdate:function(t){t&&this._renderCallbacks.push(t),E(this,2)},render:function(){}});function Q(t){return l(t.seats.map(t=>({x1:t.x,y1:t.y,x2:t.x+t.width,y2:t.y+t.height})))}function q(t){return{type:"addingSeats",seats:t,position:i}}function Z(t){return"addingSeats"===t.type}function tt(t,e,r){return{type:"movingSeats",seats:t,initialPosition:e,position:e,positionInAction:r}}function et(t){return"movingSeats"===t.type}function rt(t,e){return{type:"zoneSelection",zone:t,additionalSeats:e}}function it(t){return"zoneSelection"===t.type}function at(t,e){return{type:"graping",clientStartingPosition:t,mapStartingPosition:e}}function nt(t){return"graping"===t.type}function st(t,e){const r=void 0!==e?e.borderWidth:0;return{x1:t.x-r,y1:t.y-r,x2:t.x+t.width+r,y2:t.y+t.height+r}}function ot(t){return{x:t.x1,y:t.y1,width:t.x2-t.x1,height:t.y2-t.y1}}function dt(t){const e=ot(l(t.seats.map(t=>st(t))));return M("svg",{viewBox:`${e.x-5} ${e.y-5} ${e.width+10} ${e.height+10}`,width:800,height:500},t.seats.map(e=>M("g",{id:`seat-${e.id}`},"rectangle"===function(t,e){const r=e.find(e=>e.id===t.type);return void 0!==r?r.figure:"rectangle"}(e,t.types)?function(t){return M("rect",{x:t.x,y:t.y,width:t.width,height:t.height,fill:"#fff",stroke:"black"})}(e):function(t){return M("ellipse",{cx:t.x+t.width/2,cy:t.y+t.height/2,rx:t.width/2,ry:t.height/2,fill:"#fff",stroke:"black"})}(e),M("text",Object.assign({x:e.x+e.width/2,y:e.y+e.height/2},{"dominant-baseline":"middle","text-anchor":"middle"}),e.name))))}function lt(t){let e="";for(let r in t)t.hasOwnProperty(r)&&(e+=`${r}{${ct(t[r])}}`);return e}function ct(t){const e=[];for(let r in t)t.hasOwnProperty(r)&&e.push(`${ut(r)}:${t[r]}`);return e.join(";")}function ut(t){return t.replace(/[A-Z]/g,"-$&").toLowerCase()}function ht(...t){return t.reduce((t,e)=>{const r=Object.assign({},t);for(let t in e)e.hasOwnProperty(t)&&(r[t]=Object.assign({},r[t]||{},e[t]));return r},{})}const pt={".field":{display:"flex",alignItems:"center",width:"100%",margin:"1rem 0"},".field .field-label":{margin:0,flexBasis:"150px",flexShrink:0},".field-input":{margin:"0",marginLeft:"0.5rem",display:"flex",flexGrow:1},".field-input input[type=text], .field-input input[type=number], .field-input input[type=color]":{width:"100%",border:"1px solid #ccc",borderRadius:"2px",padding:"0.25rem",flexGrow:1},".field-input.radio":{flexDirection:"column"},".field-input.radio label":{display:"flex",alignItems:"center",margin:"0.25rem 0"},".field-input.radio label input[type=radio]":{margin:0,marginRight:"0.5rem"}};function gt(t,e){return new Promise((r,i)=>{const a=document.createElement("div"),n=a.attachShadow({mode:"open"});document.body.appendChild(a);const s=()=>document.body.removeChild(a);X(M("div",{},M("style",{},lt(Object.assign({".modal":{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.25)",display:"flex",justifyContent:"center",alignItems:"center"},".container":{backgroundColor:"white"},".title":{margin:0,padding:"15px",borderBottom:"1px solid #ccc"},".body":{margin:0,padding:"15px"},".footer":{margin:0,padding:"15px",display:"flex",justifyContent:"flex-end",borderTop:"1px solid #ccc"},".row":{display:"flex"},".col":{maxHeight:"510px",overflow:"auto"}},pt))),M(t,Object.assign({},{onSubmit:t=>{s(),r(t)},onCancel:()=>{s(),i()}},e))),n)})}class ft extends J{constructor(){super(...arguments),this.stopPropagation=(t=>t.stopPropagation()),this.onKeyPress=(t=>{"Escape"===t.key&&this.props.onCancel()})}componentDidMount(){this.base&&this.base.focus()}render(t){return M("div",{class:"modal",onClick:t.onCancel,tabIndex:-1,onKeyPress:this.onKeyPress},M("div",{class:"container",onClick:this.stopPropagation},M("h4",{class:"title"},t.title),M("div",{class:"body"},t.children),M("div",{class:"footer"},M("button",{type:"submit",onClick:t.onSubmit},"Submit"),M("button",{onClick:t.onCancel},"Cancel"))))}}function bt(t,e){return new Array(t).fill(0).map((t,r)=>e(r))}function yt(t,e,r){if(t.length===e.length){for(let i=0;i<t.length;i++)if(!r(t[i],e[i]))return!1;return!0}return!1}function mt({direction:t,numberOfSeats:e,spacing:r,firstLetter:i,firstNumber:a,changing:n,order:s,type:o,seatWidth:d,seatHeight:l}){const c=e=>"horizontal"===t?(d+r)*e:0,u=e=>"vertical"===t?(l+r)*e:0,h=t=>"letter"===n?Mt("ascending"===s?St(i)+t:St(i)-t):i,p=t=>"number"===n?"ascending"===s?a+t:a-t:a;return bt(e,t=>({id:-1,type:o,name:`${h(t)}${p(t)}`,x:c(t),y:u(t),width:d,height:l}))}const xt="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");function St(t){return""===t?0:t.toUpperCase().split("").filter(t=>xt.includes(t)).map(t=>xt.indexOf(t)+1).reverse().reduce((t,e,r)=>t+e*Math.pow(26,r),0)}function Mt(t){let e=t,r="";for(;e>0;)r=xt[(e-1)%26]+r,e=Math.floor((e-1)/26);return r}function wt({numberOfRows:t,numberOfColumns:e,columnSpacing:r,rowSpacing:i,shift:a,firstLetter:n,firstNumber:s,letterDirection:o,letterOrder:d,numberOrder:l,type:c,seatWidth:u,seatHeight:h}){const p=(t,e)=>Mt("ascending"===d?St(n)+t:e+St(n)-t-1),g=(t,e)=>"ascending"===l?s+t:e+s-t-1,f=(r,i)=>"horizontal"===o?`${p(r,t)}${g(i,e)}`:`${p(i,e)}${g(r,t)}`;return bt(t,t=>bt(e,e=>({id:-1,type:c,name:f(t,e),x:(u+i)*e+t*a%(u+i),y:(h+r)*t,width:u,height:h}))).flat()}class vt extends J{constructor(t){super(t),this.onChange=(t=>{this.props.onChange(t.target.value)})}render(t){return M("div",{class:"field"},M("p",{class:"field-label"},t.label),M("p",{class:"field-input radio"},t.options.map(e=>M("label",null,M("input",{type:"radio",name:t.name,value:e.value,checked:t.value===e.value,onChange:this.onChange}),e.label))))}}class Ct extends J{constructor(t){super(t),this.onInput=(t=>{const e=t.target,r=parseInt(e.value,10);this.props.onChange(r)})}render(t){return M("div",{class:"field"},M("label",{for:t.name,class:"field-label"},t.label),M("p",{class:"field-input"},M("input",{type:"number",name:t.name,id:t.name,min:t.min,max:t.max,value:t.value.toString(),onInput:this.onInput})))}}class Ot extends J{constructor(t){super(t),this.onInput=(t=>{const e=t.target;this.props.onChange(e.value)}),this.onKeyPress=(t=>t.stopPropagation())}render(t){return M("div",{class:"field"},M("label",{for:t.name,class:"field-label"},t.label),M("p",{class:"field-input"},M("input",{type:"text",name:t.name,id:t.name,value:t.value,onInput:this.onInput,onKeyPress:this.onKeyPress})))}}const kt=50,Lt=50;function Gt(t,e){return t.id===e.id&&t.name===e.name&&t.x===e.x&&t.y===e.y}var Pt={"toolbar.addSeat":"Add a seat","toolbar.addLine":"Add a line of seats","toolbar.addGrid":"Add a grid of seats","toolbar.rename":"Rename","toolbar.removeSeat":"Remove seat","toolbar.cancel":"Cancel current action","rightPanel.typesOfSeats":"Types of seats","rightPanel.newType":"New type","rightPanel.typeName":"Type name","rightPanel.figure":"Figure","rightPanel.figure.rectangle":"Rectangle","rightPanel.figure.circle":"Circle","rightPanel.borderColor":"Border color","rightPanel.borderWidth":"Border width","rightPanel.bookable":"Bookable","rightPanel.bookable.true":"Yes","rightPanel.bookable.false":"No","rightPanel.typeOfSelectSeats":"Type of selected seats","rightPanel.seatName":"Seat name","rightPanel.seatType":"Type","rightPanel.xPos":"X position","rightPanel.yPos":"Y position","rightPanel.width":"Width","rightPanel.height":"Height","addLineModal.title":"Add a line of seats","addLineModal.direction":"Direction","addLineModal.direction.horizontal":"Horizontal","addLineModal.direction.vertical":"Vertical","addLineModal.numberOfSeats":"Number of seats","addLineModal.spacing":"Spacing between seats","addLineModal.firstLetter":"First letter","addLineModal.firstNumber":"First number","addLineModal.changing":"Changing","addLineModal.changing.letter":"Letter","addLineModal.changing.number":"Number","addLineModal.order":"Order","addLineModal.order.ascending":"Ascending","addLineModal.order.descending":"Descending","addLineModal.type":"Type","addLineModal.seatWidth":"Seat width","addLineModal.seatHeight":"Seat height","addGridModal.title":"Add a grid of seats","addGridModal.numberOfRows":"Number of rows","addGridModal.numberOfColumns":"Number of seats per row","addGridModal.columnSpacing":"Spacing between two rows","addGridModal.rowSpacing":"Spacing between two seats in a row","addGridModal.shift":"Shift between two rows","addGridModal.firstLetter":"First letter","addGridModal.firstNumber":"First number","addGridModal.letterDirection":"Letter direction","addGridModal.letterDirection.horizontal":"Horizontal","addGridModal.letterDirection.vertical":"Vertical","addGridModal.letterOrder":"Letter order","addGridModal.letterOrder.ascending":"Ascending","addGridModal.letterOrder.descending":"Descending","addGridModal.numberOrder":"Number order","addGridModal.numberOrder.ascending":"Ascending","addGridModal.numberOrder.descending":"Descending","addGridModal.type":"Type","addGridModal.seatWidth":"Seat width","addGridModal.seatHeight":"Seat height","renameSeatsModal.title":"Update seat names","types.default.seat":"Seat","types.default.stage":"Stage"};var _t={"toolbar.addSeat":"Ajouter un siège","toolbar.addLine":"Ajouter une ligne de sièges","toolbar.addGrid":"Ajouter une grille de sièges","toolbar.rename":"Renommer","toolbar.removeSeat":"Supprimer la sélection","toolbar.cancel":"Annuler","rightPanel.typesOfSeats":"Types des sièges","rightPanel.newType":"Nouveau type","rightPanel.typeName":"Nom du type","rightPanel.figure":"Figure","rightPanel.figure.rectangle":"Rectangle","rightPanel.figure.circle":"Cercle","rightPanel.borderColor":"Couleur de la bordure","rightPanel.borderWidth":"Épaisseur de la bordure","rightPanel.bookable":"Réservable","rightPanel.bookable.true":"Oui","rightPanel.bookable.false":"Non","rightPanel.typeOfSelectSeats":"Type des sièges sélectionnés","rightPanel.seatName":"Nom du siège","rightPanel.seatType":"Type","rightPanel.xPos":"Position X","rightPanel.yPos":"Position Y","rightPanel.width":"Largeur","rightPanel.height":"Hauteur","addLineModal.title":"Ajouter une ligne de sièges","addLineModal.direction":"Direction","addLineModal.direction.horizontal":"Horizontal","addLineModal.direction.vertical":"Vertical","addLineModal.numberOfSeats":"Nombre de sièges","addLineModal.spacing":"Espace entre deux sièges","addLineModal.firstLetter":"Première lettre","addLineModal.firstNumber":"Premier nombre","addLineModal.changing":"Changement","addLineModal.changing.letter":"Lettre","addLineModal.changing.number":"Nombre","addLineModal.order":"Ordre","addLineModal.order.ascending":"Ascendant","addLineModal.order.descending":"Descendant","addLineModal.type":"Type","addLineModal.seatWidth":"Largeur du siège","addLineModal.seatHeight":"Hauteur du siège","addGridModal.title":"Ajouter une grille de sièges","addGridModal.numberOfRows":"Nombre de lignes","addGridModal.numberOfColumns":"Nombre de sièges par ligne","addGridModal.columnSpacing":"Espace entre deux lignes","addGridModal.rowSpacing":"Espace entre deux sièges d'une même ligne","addGridModal.shift":"Décalage entre deux lignes","addGridModal.firstLetter":"Première lettre","addGridModal.firstNumber":"Premier nombre","addGridModal.letterDirection":"Direction des lettres","addGridModal.letterDirection.horizontal":"Horizontal","addGridModal.letterDirection.vertical":"Vertical","addGridModal.letterOrder":"Ordre des lettres","addGridModal.letterOrder.ascending":"Ascendant","addGridModal.letterOrder.descending":"Descendant","addGridModal.numberOrder":"Ordre des nombres","addGridModal.numberOrder.ascending":"Ascendant","addGridModal.numberOrder.descending":"Descendant","addGridModal.type":"Type","addGridModal.seatWidth":"Largeur des sièges","addGridModal.seatHeight":"Hauteur des sièges","renameSeatsModal.title":"Renommer les sièges","types.default.seat":"Siège","types.default.stage":"Scène"};function jt(t,e){switch(e){case"en":return Pt[t];case"fr":return _t[t];default:return Pt[t]}}class Tt extends J{constructor(t){super(t),this.updateDirection=(t=>this.setState({direction:t})),this.updateNumberOfSeats=(t=>this.setState({numberOfSeats:t})),this.updateSpacing=(t=>this.setState({spacing:t})),this.updateFirstLetter=(t=>this.setState({firstLetter:t})),this.updateFirstNumber=(t=>this.setState({firstNumber:t})),this.updateChanging=(t=>this.setState({changing:t})),this.updateOrder=(t=>this.setState({order:t})),this.updateType=(t=>this.setState({type:parseInt(t,10)})),this.updateSeatWidth=(t=>this.setState({seatWidth:t})),this.updateSeatHeight=(t=>this.setState({seatHeight:t})),this.onSubmit=(()=>this.props.onSubmit(this.state)),this.onCancel=(()=>this.props.onCancel()),this.state={direction:"horizontal",numberOfSeats:1,spacing:0,firstLetter:"A",firstNumber:1,changing:"number",order:"ascending",type:t.types[0].id,seatWidth:kt,seatHeight:Lt}}render(t,e){return M(ft,{title:jt("addLineModal.title",t.language),onSubmit:this.onSubmit,onCancel:this.onCancel},M("div",{class:"row"},M("div",{class:"col"},M(vt,{name:"add-line-direction",label:jt("addLineModal.direction",t.language),options:[{label:jt("addLineModal.direction.horizontal",t.language),value:"horizontal"},{label:jt("addLineModal.direction.vertical",t.language),value:"vertical"}],value:e.direction,onChange:this.updateDirection}),M(Ct,{name:"add-line-number-of-seats",label:jt("addLineModal.numberOfSeats",t.language),min:1,value:e.numberOfSeats,onChange:this.updateNumberOfSeats}),M(Ct,{name:"add-line-spacing",label:jt("addLineModal.spacing",t.language),min:0,value:e.spacing,onChange:this.updateSpacing}),M(Ot,{name:"add-line-first-letter",label:jt("addLineModal.firstLetter",t.language),value:e.firstLetter,onChange:this.updateFirstLetter}),M(Ct,{name:"add-line-first-number",label:jt("addLineModal.firstNumber",t.language),min:0,value:e.firstNumber,onChange:this.updateFirstNumber}),M(vt,{name:"add-line-changing",label:jt("addLineModal.changing",t.language),options:[{label:jt("addLineModal.changing.letter",t.language),value:"letter"},{label:jt("addLineModal.changing.number",t.language),value:"number"}],value:e.changing,onChange:this.updateChanging}),M(vt,{name:"add-line-order",label:jt("addLineModal.order",t.language),options:[{label:jt("addLineModal.order.ascending",t.language),value:"ascending"},{label:jt("addLineModal.order.descending",t.language),value:"descending"}],value:e.order,onChange:this.updateOrder}),M(vt,{name:"add-line-type",label:jt("addLineModal.type",t.language),options:t.types.map(t=>({label:t.name,value:t.id.toString()})),value:e.type.toString(),onChange:this.updateType}),M(Ct,{name:"add-line-seat-width",label:jt("addLineModal.seatWidth",t.language),min:0,value:e.seatWidth,onChange:this.updateSeatWidth}),M(Ct,{name:"add-line-seat-height",label:jt("addLineModal.seatHeight",t.language),min:0,value:e.seatHeight,onChange:this.updateSeatHeight})),M("div",{class:"col"},this.renderPreview(t,e))))}renderPreview(t,e){return M(dt,{seats:mt(e),types:t.types})}}class At extends J{constructor(t){super(t),this.updateNumberOfRows=(t=>this.setState({numberOfRows:t})),this.updateNumberOfColumns=(t=>this.setState({numberOfColumns:t})),this.updateColumnSpacing=(t=>this.setState({columnSpacing:t})),this.updateRowSpacing=(t=>this.setState({rowSpacing:t})),this.updateShift=(t=>this.setState({shift:t})),this.updateFirstLetter=(t=>this.setState({firstLetter:t})),this.updateFirstNumber=(t=>this.setState({firstNumber:t})),this.updateLetterDirection=(t=>this.setState({letterDirection:t})),this.updateLetterOrder=(t=>this.setState({letterOrder:t})),this.updateNumberOrder=(t=>this.setState({numberOrder:t})),this.updateSeatWidth=(t=>this.setState({seatWidth:t})),this.updateSeatHeight=(t=>this.setState({seatHeight:t})),this.updateType=(t=>this.setState({type:parseInt(t,10)})),this.onSubmit=(()=>this.props.onSubmit(this.state)),this.onCancel=(()=>this.props.onCancel()),this.state={numberOfRows:1,numberOfColumns:1,columnSpacing:0,rowSpacing:0,shift:0,firstLetter:"A",firstNumber:1,letterDirection:"horizontal",letterOrder:"ascending",numberOrder:"ascending",type:t.types[0].id,seatWidth:kt,seatHeight:Lt}}render(t,e){return M(ft,{title:jt("addGridModal.title",t.language),onSubmit:this.onSubmit,onCancel:this.onCancel},M("div",{class:"row"},M("div",{class:"col"},M(Ct,{name:"add-grid-number-of-rows",label:jt("addGridModal.numberOfRows",t.language),min:1,value:e.numberOfRows,onChange:this.updateNumberOfRows}),M(Ct,{name:"add-grid-number-of-columns",label:jt("addGridModal.numberOfColumns",t.language),min:1,value:e.numberOfColumns,onChange:this.updateNumberOfColumns}),M(Ct,{name:"add-grid-column-spacing",label:jt("addGridModal.columnSpacing",t.language),min:0,value:e.columnSpacing,onChange:this.updateColumnSpacing}),M(Ct,{name:"add-grid-row-spacing",label:jt("addGridModal.rowSpacing",t.language),min:0,value:e.rowSpacing,onChange:this.updateRowSpacing}),M(Ct,{name:"add-grid-shift",label:jt("addGridModal.shift",t.language),min:0,value:e.shift,onChange:this.updateShift}),M(Ot,{name:"add-grid-first-letter",label:jt("addGridModal.firstLetter",t.language),value:e.firstLetter,onChange:this.updateFirstLetter}),M(Ct,{name:"add-grid-first-number",label:jt("addGridModal.firstNumber",t.language),min:0,value:e.firstNumber,onChange:this.updateFirstNumber}),M(vt,{name:"add-grid-letter-direction",label:jt("addGridModal.letterDirection",t.language),options:[{label:jt("addGridModal.letterDirection.horizontal",t.language),value:"horizontal"},{label:jt("addGridModal.letterDirection.vertical",t.language),value:"vertical"}],value:e.letterDirection,onChange:this.updateLetterDirection}),M(vt,{name:"add-grid-letter-order",label:jt("addGridModal.letterOrder",t.language),options:[{label:jt("addGridModal.letterOrder.ascending",t.language),value:"ascending"},{label:jt("addGridModal.letterOrder.descending",t.language),value:"descending"}],value:e.letterOrder,onChange:this.updateLetterOrder}),M(vt,{name:"add-grid-number-order",label:jt("addGridModal.numberOrder",t.language),options:[{label:jt("addGridModal.numberOrder.ascending",t.language),value:"ascending"},{label:jt("addGridModal.numberOrder.descending",t.language),value:"descending"}],value:e.numberOrder,onChange:this.updateNumberOrder}),M(vt,{name:"add-grid-type",label:jt("addGridModal.type",t.language),options:t.types.map(t=>({label:t.name,value:t.id.toString()})),value:e.type.toString(),onChange:this.updateType}),M(Ct,{name:"add-grid-seat-width",label:jt("addGridModal.seatWidth",t.language),min:0,value:e.seatWidth,onChange:this.updateSeatWidth}),M(Ct,{name:"add-grid-seat-height",label:jt("addGridModal.seatHeight",t.language),min:0,value:e.seatHeight,onChange:this.updateSeatHeight})),M("div",{class:"col"},this.renderPreview(t,e))))}renderPreview(t,e){return M(dt,{seats:wt(e),types:t.types})}}function Nt(t,e){return Math.round(t)===Math.round(e)}const Ht=5;function Wt(t,e){return Math.abs(t.x1-e.x1)<Ht?e.x1-t.x1:Math.abs(t.x2-e.x2)<Ht?e.x2-t.x2:Math.abs(t.x1-e.x2)<Ht?e.x2-t.x1:Math.abs(t.x2-e.x1)<Ht?e.x1-t.x2:0}function zt(t,e){return Math.abs(t.y1-e.y1)<Ht?e.y1-t.y1:Math.abs(t.y2-e.y2)<Ht?e.y2-t.y2:Math.abs(t.y1-e.y2)<Ht?e.y2-t.y1:Math.abs(t.y2-e.y1)<Ht?e.y1-t.y2:0}function Dt(t){return e=>{e.currentTarget===e.target&&t(e)}}function $t(t){const e=function(t){const e={top:0,left:0};let r=t;for(;r;)e.top+=r.scrollTop||0,e.left+=r.scrollLeft||0,r=r.host?r.host:r.parentNode;return e}(t.currentTarget);return{x:t.clientX-t.currentTarget.offsetLeft+e.left,y:t.clientY-t.currentTarget.offsetTop+e.top}}class Vt extends J{constructor(t){super(t),this.updateSeatName=((t,e)=>{this.setState({seats:this.state.seats.map(r=>r.id===t?Object.assign({},r,{name:e}):r)})}),this.onSubmit=(()=>this.props.onSubmit(this.state)),this.onCancel=(()=>this.props.onCancel()),this.state={seats:t.seats.map(t=>({id:t.id,name:t.name,initialName:t.name}))}}render(t,e){return M(ft,{title:jt("renameSeatsModal.title",t.language),onSubmit:this.onSubmit,onCancel:this.onCancel},e.seats.map(t=>M(Ot,{name:`rename-seat-${t.id}`,label:t.initialName,value:t.name,onChange:e=>this.updateSeatName(t.id,e)})))}}function Bt(t){return{id:1,name:jt("types.default.seat",t),figure:"rectangle",borderColor:"#000",borderWidth:1,bookable:!0}}function Ut(t){return{id:2,name:jt("types.default.stage",t),figure:"rectangle",borderColor:"#000",borderWidth:5,bookable:!1}}function It(t,e){return t.id===e.id&&t.name===e.name&&t.figure===e.figure&&t.borderColor===e.borderColor&&t.borderWidth===e.borderWidth&&t.bookable===e.bookable}function Ft(t){return{seats:[],types:[Bt(t),Ut(t)]}}function Rt(t,e){return t.seats.filter(t=>e.includes(t.id))}function Kt(t,e){return t.seats.filter(t=>(function(t,e){const r=c(t).some(t=>b(t,e)),i=c(e).some(e=>b(e,t)),a=t.x1<=e.x1&&e.x2<=t.x2&&e.y1<=t.y1&&t.y2<=e.y2,n=t.y1<=e.y1&&e.y2<=t.y2&&e.x1<=t.x1&&t.x2<=e.x2;return r||i||a||n})(st(t),f(e)))}function Et(t,e){return Object.assign({},t,{seats:t.seats.map(t=>t.id===e.id?Object.assign({},t,e):t)})}function Yt(t,e){return Object.assign({},t,{seats:t.seats.map(t=>{const r=e.find(e=>e.id===t.id);return r?Object.assign({},t,r):t})})}function Jt(t,e){return Object.assign({},t,{seats:[...t.seats,...e]})}function Xt(t,e){return Object.assign({},t,{seats:t.seats.filter(t=>e.every(e=>e!==t.id))})}function Qt(t){return t.types.reduce((t,e)=>Math.max(t,e.id),0)+1}function qt(t,e){return Object.assign({},t,{types:[...t.types,e]})}function Zt(t,e){return Object.assign({},t,{types:t.types.map(t=>t.id===e.id?Object.assign({},t,e):t)})}function te(t,e){return Object.assign({},t,{types:t.types.filter(t=>t.id!==e)})}class ee{constructor(t,e){this.reload=((t,e)=>{this.update({structure:t,language:e,selectedSeatIds:[],action:void 0})}),this.startAddSeat=(()=>{this.update({action:q([{id:-1,type:this.state.structure.types[0].id,name:"",x:0,y:0,width:kt,height:Lt}])})}),this.startAddLine=(()=>{(function(t,e){return gt(Tt,{types:t,language:e})})(this.state.structure.types,this.state.language).then(t=>{this.update({action:q(mt(t))})})}),this.startAddGrid=(()=>{(function(t,e){return gt(At,{types:t,language:e})})(this.state.structure.types,this.state.language).then(t=>{this.update({action:q(wt(t))})})}),this.renameSeat=(t=>{this.renameSeats([t])}),this.renameSelectedSeats=(()=>{this.renameSeats(this.state.selectedSeatIds)}),this.renameSeats=(t=>{const e=Rt(this.state.structure,t);e.length>0&&function(t,e){return gt(Vt,{seats:t,language:e})}(e,this.state.language).then(({seats:t})=>{this.update({structure:Yt(this.state.structure,t)})})}),this.removeSeats=(()=>{this.update({structure:Xt(this.state.structure,this.state.selectedSeatIds),selectedSeatIds:[]})}),this.selectSeat=((t,e)=>{e?this.update({selectedSeatIds:[...this.state.selectedSeatIds,t]}):this.update({selectedSeatIds:[t]})}),this.deselectAllSeats=(()=>{this.update({selectedSeatIds:[]})}),this.startZoneSelection=(t=>{this.update({action:rt({x1:this.state.mousePosition.x,y1:this.state.mousePosition.y,x2:this.state.mousePosition.x,y2:this.state.mousePosition.y},t.ctrlKey)})}),this.startMoveSeats=(()=>{const t=l(this.getSelectedSeats().map(t=>st(t)));this.update({action:tt(this.getSelectedSeats().map(e=>d(e,s({x:t.x1,y:t.y1}))),u(t),n(u(t),this.state.mousePosition))})}),this.getSelectedSeats=(()=>Rt(this.state.structure,this.state.selectedSeatIds)),this.confirmAction=(()=>{const t=this.state.action;if(t)switch(t.type){case"addingSeats":const e=function(t){return t.seats.reduce((t,e)=>Math.max(t,e.id),0)+1}(this.state.structure);this.update({structure:Jt(this.state.structure,t.seats.map((r,i)=>({id:e+i,type:r.type,name:r.name,x:Math.round(r.x+t.position.x),y:Math.round(r.y+t.position.y),width:r.width,height:r.height}))),action:void 0});break;case"movingSeats":this.update({structure:Yt(this.state.structure,t.seats.map(e=>d(e,t.position))),action:void 0});break;case"zoneSelection":const r=Kt(this.state.structure,t.zone).map(t=>t.id);this.update({selectedSeatIds:t.additionalSeats?[...this.state.selectedSeatIds,...r]:r,action:void 0})}}),this.cancelAction=(()=>{this.state.action&&nt(this.state.action)?this.update({translation:this.state.action.mapStartingPosition,action:void 0}):this.update({selectedSeatIds:[],action:void 0})}),this.updateMousePosition=(t=>{const e=a(t,s(this.state.translation));this.update({mousePosition:e});const r=this.state.action;if(r)if(Z(r)){const t=ot(Q(r));this.update({action:Object.assign({},r,{position:{x:e.x-t.width/2,y:e.y-t.height/2}})})}else if(et(r)){const t=a(e,s(r.positionInAction)),i=l(r.seats.map(t=>st(t))),n=function(t,e){return{x:Wt(t,e),y:zt(t,e)}}(o(i,t),o(i,r.initialPosition));this.update({action:Object.assign({},r,{position:a(t,n)})})}else it(r)?this.update({action:Object.assign({},r,{zone:Object.assign({},r.zone,{x2:e.x,y2:e.y})})}):nt(r)&&this.update({translation:a(r.mapStartingPosition,n(r.clientStartingPosition,t))})}),this.startGraping=(t=>{this.update({action:at(t,this.state.translation)})}),this.endGraping=(()=>{this.state.action&&nt(this.state.action)&&this.update({action:void 0})}),this.updateSeat=(t=>{this.update({structure:Et(this.state.structure,t)})}),this.updateSelectedSeats=(t=>{this.update({structure:Yt(this.state.structure,Rt(this.state.structure,this.state.selectedSeatIds).map(e=>Object.assign({},t,{id:e.id})))})}),this.addType=(()=>{this.update({structure:qt(this.state.structure,Object.assign({},Bt(this.state.language),{id:Qt(this.state.structure)}))})}),this.updateType=(t=>{this.update({structure:Zt(this.state.structure,t)})}),this.removeType=(t=>{this.update({structure:te(this.state.structure,t)})}),this.state=t,this.listener=e,this.listener(this.state)}update(t){this.state=Object.assign({},this.state,t),this.listener(this.state)}}function re(t){const e=t.state.action;return void 0!==e?M("g",{id:"shadow"},et(e)?function(t){const e=ot(o(l(t.seats.map(t=>st(t))),t.initialPosition));return M("rect",Object.assign({x:e.x,y:e.y,width:e.width,height:e.height,fill:"transparent",stroke:"#aaa"},{"stroke-dasharray":"3 2"}))}(e):void 0,Z(e)||et(e)?function(t,e){const r=ot(Q(t));return M("g",{onMouseUp:e.confirmAction},M("rect",{x:r.x+t.position.x,y:r.y+t.position.y,width:r.width,height:r.height,fill:"transparent",stroke:"transparent"}),t.seats.map(e=>d(e,t.position)).map(t=>(function(t,e){return"rectangle"===function(t,e){const r=e.state.structure.types.find(e=>e.id===t.type);return void 0!==r?r.figure:"rectangle"}(t,e)?M("rect",Object.assign({x:t.x,y:t.y,width:t.width,height:t.height,fill:"transparent",strokeWidth:1,stroke:"#555"},{"stroke-dasharray":"5 2"})):M("ellipse",Object.assign({cx:t.x+t.width/2,cy:t.y+t.height/2,rx:t.width/2,ry:t.height/2,fill:"transparent",strokeWidth:1,stroke:"#555"},{"stroke-dasharray":"5 2"}))})(t,e)))}(e,t):void 0,Z(e)||et(e)?(r=o(Q(e),e.position),t.state.structure.seats.flatMap(t=>{const e=[],i=Math.min(t.x,r.x1)-10,a=Math.min(t.y,r.y1)-10,n=Math.max(t.x+t.width,r.x2)+10,s=Math.max(t.y+t.height,r.y2)+10;return Nt(t.x,r.x1)&&e.push({x1:t.x,y1:a,x2:t.x,y2:s}),Nt(t.x+t.width,r.x2)&&e.push({x1:t.x+t.width,y1:a,x2:t.x+t.width,y2:s}),Nt(t.x+t.width,r.x1)&&e.push({x1:r.x1,y1:a,x2:r.x1,y2:s}),Nt(t.x,r.x2)&&e.push({x1:t.x,y1:a,x2:t.x,y2:s}),Nt(t.y,r.y1)&&e.push({x1:i,y1:t.y,x2:n,y2:t.y}),Nt(t.y+t.height,r.y2)&&e.push({x1:i,y1:t.y+t.height,x2:n,y2:t.y+t.height}),Nt(t.y+t.height,r.y1)&&e.push({x1:i,y1:r.y1,x2:n,y2:r.y1}),Nt(t.y,r.y2)&&e.push({x1:i,y1:t.y,x2:n,y2:t.y}),e}).map(t=>M("line",{x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,stroke:"#aaa"}))):void 0,it(e)?function(t,e){const r=ot(f(t.zone));return M("rect",{x:r.x,y:r.y,width:r.width,height:r.height,fill:"transparent",stroke:"#aaa",onMouseUp:e})}(e,t.confirmAction):void 0):M("g",{id:"shadow"});var r}function ie(t){const{seat:e,type:r,onClick:i,onMouseDown:a}=t;return M("g",{id:`seat-${e.id}`,onClick:i,onMouseDown:a},"rectangle"===r.figure?function({seat:t,type:e,fill:r}){return M("rect",Object.assign({x:t.x,y:t.y,width:t.width,height:t.height,fill:r||"#fff",stroke:e.borderColor},{"stroke-width":e.borderWidth}))}(t):function({seat:t,type:e,fill:r}){return M("ellipse",Object.assign({cx:t.x+t.width/2,cy:t.y+t.height/2,rx:t.width/2,ry:t.height/2,fill:r||"#fff",stroke:e.borderColor},{"stroke-width":e.borderWidth}))}(t),M("text",Object.assign({x:e.x+e.width/2,y:e.y+e.height/2},{"dominant-baseline":"middle","text-anchor":"middle"}),e.name))}class ae extends J{constructor(t){super(t),this.isSelected=(()=>this.props.storeState.selectedSeatIds.includes(this.props.seat.id)),this.getType=(()=>{const t=this.props.storeState.structure.types.find(t=>t.id===this.props.seat.type);return void 0!==t?t:{id:-1,name:"",figure:"rectangle",borderColor:"#000",borderWidth:1}}),this.onClick=(t=>{this.props.selectSeat(this.props.seat.id,t.ctrlKey||t.metaKey)}),this.onMouseDown=(()=>{this.isSelected()&&this.props.startMoveSeats()})}render({seat:t}){return M(ie,{seat:t,type:this.getType(),fill:this.isSelected()?"#ccc":"#fff",onClick:this.onClick,onMouseDown:this.onMouseDown})}}function ne(t){const{state:e,confirmAction:r}=t;return M("svg",{class:(i=["map",t.state.action?"map-action":void 0],i.filter(t=>void 0!==t)).join(" "),onClick:Dt(t.deselectAllSeats),onMouseDown:Dt(t.startZoneSelection),onMouseUp:Dt(t.confirmAction)},M("g",{transform:`translate(${e.translation.x}, ${e.translation.y})`},e.structure.seats.map(e=>M(ae,{storeState:t.state,seat:e,selectSeat:t.selectSeat,startMoveSeats:t.startMoveSeats,renameSeat:t.renameSeat})),M(re,{state:e,confirmAction:r})));var i}function se(t){return M("button",{class:"icon-button",title:t.label,onClick:t.onClick},t.children)}function oe(t){return"small"===t?"16px":"24px"}var de=function({size:t}){return M("svg",{"enable-background":"new 0 0 96 96",width:oe(t),height:oe(t),id:"stack",version:"1.1",viewBox:"0 0 96 96"},M("path",{d:"M80,4H44c-6.63,0-12,5.37-12,12v16H16C9.37,32,4,37.37,4,44v36c0,6.63,5.37,12,12,12h36c6.63,0,12-5.37,12-12V64h16  c6.63,0,12-5.37,12-12V16C92,9.37,86.63,4,80,4z M56,80c0,2.21-1.79,4-4,4H16c-2.21,0-4-1.79-4-4V44c0-2.21,1.79-4,4-4h16v12  c0,6.63,5.37,12,12,12h12V80z M84,52c0,2.21-1.79,4-4,4H44c-2.21,0-4-1.79-4-4V16c0-2.21,1.79-4,4-4h36c2.21,0,4,1.79,4,4V52z"}))},le=function({size:t}){return M("svg",{"enable-background":"new 0 0 96 96",width:oe(t),height:oe(t),id:"circle_add",version:"1.1",viewBox:"0 0 96 96"},M("path",{d:"M48,4C23.7,4,4,23.699,4,48s19.7,44,44,44s44-19.699,44-44S72.3,4,48,4z M48,84c-19.882,0-36-16.118-36-36s16.118-36,36-36  s36,16.118,36,36S67.882,84,48,84z"}),M("path",{d:"M64,44H52V32c0-2.209-1.791-4-4-4s-4,1.791-4,4v12H32c-2.209,0-4,1.791-4,4s1.791,4,4,4h12v12c0,2.209,1.791,4,4,4  s4-1.791,4-4V52h12c2.209,0,4-1.791,4-4S66.209,44,64,44z"}))},ce=function({size:t}){return M("svg",{"enable-background":"new 0 0 96 96",width:oe(t),height:oe(t),id:"grid",version:"1.1",viewBox:"0 0 96 96"},M("path",{d:"M32,4H16C9.37,4,4,9.37,4,16v16c0,6.63,5.37,12,12,12h16c6.63,0,12-5.37,12-12V16C44,9.37,38.63,4,32,4z M36,32  c0,2.21-1.79,4-4,4H16c-2.21,0-4-1.79-4-4V16c0-2.21,1.79-4,4-4h16c2.21,0,4,1.79,4,4V32z"}),M("path",{d:"M80,4H64c-6.63,0-12,5.37-12,12v16c0,6.63,5.37,12,12,12h16c6.63,0,12-5.37,12-12V16C92,9.37,86.63,4,80,4z M84,32  c0,2.21-1.79,4-4,4H64c-2.21,0-4-1.79-4-4V16c0-2.21,1.79-4,4-4h16c2.21,0,4,1.79,4,4V32z"}),M("path",{d:"M80,52H64c-6.63,0-12,5.37-12,12v16c0,6.63,5.37,12,12,12h16c6.63,0,12-5.37,12-12V64C92,57.37,86.63,52,80,52z M84,80  c0,2.21-1.79,4-4,4H64c-2.21,0-4-1.79-4-4V64c0-2.21,1.79-4,4-4h16c2.21,0,4,1.79,4,4V80z"}),M("path",{d:"M32,52H16C9.37,52,4,57.37,4,64v16c0,6.63,5.37,12,12,12h16c6.63,0,12-5.37,12-12V64C44,57.37,38.63,52,32,52z M36,80  c0,2.21-1.79,4-4,4H16c-2.21,0-4-1.79-4-4V64c0-2.21,1.79-4,4-4h16c2.21,0,4,1.79,4,4V80z"}))},ue=function({size:t}){return M("svg",{fill:"none",width:oe(t),height:oe(t),stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"},M("rect",{height:"18",rx:"2",ry:"2",width:"18",x:"3",y:"3"}),M("line",{x1:"12",x2:"12",y1:"8",y2:"16"}),M("line",{x1:"8",x2:"16",y1:"12",y2:"12"}))},he=function({size:t}){return M("svg",{"enable-background":"new 0 0 96 96",width:oe(t),height:oe(t),id:"circle_cross",version:"1.1",viewBox:"0 0 96 96"},M("path",{d:"M48,4C23.7,4,4,23.699,4,48s19.7,44,44,44s44-19.699,44-44S72.3,4,48,4z M48,84c-19.882,0-36-16.118-36-36s16.118-36,36-36  s36,16.118,36,36S67.882,84,48,84z"}),M("path",{d:"M53.657,48l8.485-8.485c1.562-1.562,1.562-4.095,0-5.656c-1.562-1.562-4.096-1.562-5.658,0L48,42.343l-8.485-8.484  c-1.562-1.562-4.095-1.562-5.657,0c-1.562,1.562-1.562,4.096,0,5.656L42.343,48l-8.485,8.485c-1.562,1.562-1.562,4.095,0,5.656  c1.562,1.562,4.095,1.562,5.657,0L48,53.657l8.484,8.484c1.562,1.562,4.096,1.562,5.658,0c1.562-1.562,1.562-4.096,0-5.656  L53.657,48z"}))},pe=function({size:t}){return M("svg",{fill:"none",width:oe(t),height:oe(t),stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"},M("polygon",{points:"16 3 21 8 8 21 3 21 3 16 16 3"}))},ge=function({size:t}){return M("svg",{fill:"none",width:oe(t),height:oe(t),stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"},M("polyline",{points:"3 6 5 6 21 6"}),M("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),M("line",{x1:"10",x2:"10",y1:"11",y2:"17"}),M("line",{x1:"14",x2:"14",y1:"11",y2:"17"}))};function fe({language:t,add:e,startAddLine:r,startAddGrid:i,renameSelectedSeat:a,removeSeat:n,cancelAction:s}){return M("div",{class:"toolbar"},M(se,{label:jt("toolbar.addSeat",t),onClick:e},M(ue,null)),M(se,{label:jt("toolbar.addLine",t),onClick:r},M(de,null)),M(se,{label:jt("toolbar.addGrid",t),onClick:i},M(ce,null)),M(se,{label:jt("toolbar.rename",t),onClick:a},M(pe,null)),M(se,{label:jt("toolbar.removeSeat",t),onClick:n},M(ge,null)),M(se,{label:jt("toolbar.cancel",t),onClick:s},M(he,null)))}class be extends J{constructor(t){super(t),this.onInput=(t=>{const e=t.target;this.props.onChange(e.value)})}render(t){return M("div",{class:"field"},M("label",{for:t.name,class:"field-label"},t.label),M("p",{class:"field-input"},M("input",{type:"color",name:t.name,id:t.name,value:t.value,onInput:this.onInput})))}}function ye(t){return M("div",{className:"right-panel"},M("h3",null,jt("rightPanel.typesOfSeats",t.state.language)),t.state.structure.types.map(e=>(function(t,e){return M("details",{key:`type-${t.id.toString()}`},M("summary",null,e.state.structure.types.length>1?M(se,{label:"Remove",onClick:()=>e.removeType(t.id)},M(ge,{size:"small"})):void 0,t.name),M(Ot,{name:`right-panel-type-${t.id}-name`,label:jt("rightPanel.typeName",e.state.language),value:t.name,onChange:r=>e.updateType(Object.assign({},t,{name:r}))}),M(vt,{name:`right-panel-type-${t.id}-figure`,label:jt("rightPanel.figure",e.state.language),options:[{label:jt("rightPanel.figure.rectangle",e.state.language),value:"rectangle"},{label:jt("rightPanel.figure.circle",e.state.language),value:"circle"}],value:t.figure,onChange:r=>e.updateType(Object.assign({},t,{figure:r}))}),M(be,{name:`right-panel-type-${t.id}-border-color`,label:jt("rightPanel.borderColor",e.state.language),value:t.borderColor,onChange:r=>e.updateType(Object.assign({},t,{borderColor:r}))}),M(Ct,{name:`right-panel-type-${t.id}-border-width`,label:jt("rightPanel.borderWidth",e.state.language),value:t.borderWidth,onChange:r=>e.updateType(Object.assign({},t,{borderWidth:r}))}),M(vt,{name:`right-panel-type-${t.id}-bookable`,label:jt("rightPanel.bookable",e.state.language),options:[{label:jt("rightPanel.bookable.true",e.state.language),value:"true"},{label:jt("rightPanel.bookable.false",e.state.language),value:"false"}],value:t.bookable.toString(),onChange:r=>e.updateType(Object.assign({},t,{bookable:"true"===r}))}))})(e,t)),M("section",null,M(se,{label:jt("rightPanel.newType",t.state.language),onClick:t.addType},M(le,null))))}function me(t){const e=t.state.structure.seats.filter(e=>t.state.selectedSeatIds.includes(e.id));return M("div",{className:"right-panel"},M("h3",null,"Selected seats"),function(t,e){return M("section",null,M(vt,{name:"right-panel-seat-all-seats-type",label:jt("rightPanel.typeOfSelectSeats",e.state.language),options:e.state.structure.types.map(t=>({label:t.name,value:t.id.toString()})),value:t[0].type.toString(),onChange:t=>e.updateSelectedSeats({type:parseInt(t,10)})}))}(e,t),e.map(e=>(function(t,e){return M("details",{key:`seat-${t.id.toString()}`},M("summary",null,t.name),M(Ot,{name:`right-panel-seat-${t.id}-name`,label:jt("rightPanel.seatName",e.state.language),value:t.name,onChange:r=>e.updateSeat(Object.assign({},t,{name:r}))}),M(vt,{name:`right-panel-seat-${t.id}-type`,label:jt("rightPanel.seatType",e.state.language),options:e.state.structure.types.map(t=>({label:t.name,value:t.id.toString()})),value:t.type.toString(),onChange:r=>e.updateSeat(Object.assign({},t,{type:parseInt(r,10)}))}),M(Ct,{name:`right-panel-seat-${t.id}-pos-x`,label:jt("rightPanel.xPos",e.state.language),value:t.x,onChange:r=>e.updateSeat(Object.assign({},t,{x:r}))}),M(Ct,{name:`right-panel-seat-${t.id}-pos-y`,label:jt("rightPanel.yPos",e.state.language),value:t.y,onChange:r=>e.updateSeat(Object.assign({},t,{y:r}))}),M(Ct,{name:`right-panel-seat-${t.id}-width`,label:jt("rightPanel.width",e.state.language),value:t.width,onChange:r=>e.updateSeat(Object.assign({},t,{width:r}))}),M(Ct,{name:`right-panel-seat-${t.id}-height`,label:jt("rightPanel.height",e.state.language),value:t.height,onChange:r=>e.updateSeat(Object.assign({},t,{height:r}))}))})(e,t)))}function xe(t){return 0===t.state.selectedSeatIds.length?M(ye,{state:t.state,addType:t.addType,updateType:t.updateType,removeType:t.removeType}):M(me,{state:t.state,updateSeat:t.updateSeat,updateSelectedSeats:t.updateSelectedSeats})}var Se={".map":{cursor:"default",MozUserSelect:"none",WebkitUserSelect:"none",msUserSelect:"none",userSelect:"none"}};var Me=ht(Se,pt,{":host, .host":{display:"flex",flexDirection:"column",alignItems:"stretch",width:"100%",height:"100%",outline:"none"},".toolbar":{display:"flex",flexDirection:"row",justifyContent:"center"},".row":{flexGrow:1,display:"flex",alignItems:"stretch"},".map-container":{display:"flex",alignItems:"stretch",position:"relative",height:"100%"},".map":{flexGrow:1},".map:not(.map-action) rect, .map ellipse, .map text":{cursor:"pointer"},".right-panel":{flex:"350px 0 0",margin:"1rem",boxShadow:"0 0 2px #aaa",maxHeight:"calc(100vh - 40px - 2rem)",overflow:"auto"},".right-panel section, .right-panel h3":{margin:"1rem 0",padding:"0 0.5rem"},".right-panel details":{padding:"0 1rem",border:"1px solid #ccc"},".right-panel details:not(:first-of-type)":{borderTop:"none"},".right-panel details summary":{padding:"0.25rem",cursor:"pointer",outline:"none"},".icon-button":{display:"inline-flex",alignItems:"center",justifyContent:"center",border:"none",backgroundColor:"#fff",cursor:"pointer",padding:"0.5rem",transition:"all 0.25s ease-in-out"},".icon-button:hover":{backgroundColor:"#ddd"}});function we(t){return{seats:t.seats.map(ve),types:t.types.map(Ce)}}function ve(t){return{id:t.id,type:t.type,name:t.name,x:t.x,y:t.y,width:t.width,height:t.height}}function Ce(t){return{id:t.id,name:t.name,figure:"rectangle"===t.figure||"circle"===t.figure?t.figure:"rectangle",borderColor:t.borderColor,borderWidth:t.borderWidth,bookable:t.bookable}}function Oe(t){return{version:"0.1.0",seats:t.seats.map(ke),types:t.types.map(Le)}}function ke(t){return{id:t.id,type:t.type,name:t.name,x:t.x,y:t.y,width:t.width,height:t.height}}function Le(t){return{id:t.id,name:t.name,figure:t.figure,borderColor:t.borderColor,borderWidth:t.borderWidth,bookable:t.bookable}}function Ge(t){switch(t.version||""){case"0.1.0":default:return we(t)}}function Pe(t,e,r){return class extends HTMLElement{constructor(){super(),this.shadow=this.attachShadow({mode:"open"})}static get observedAttributes(){return e}connectedCallback(){this.render()}attributeChangedCallback(){this.render()}render(){this.isConnected&&(this.currentElement=X(M(t,r(this)),this.shadow,this.currentElement))}}}function _e({structure:t,width:e,height:r,preserveAspectRatio:i}){const a=ot(l(t.seats.map(e=>st(e,t.types.find(t=>t.id===e.type)))));return M("svg",{class:"map preview",viewBox:`${a.x} ${a.y} ${a.width} ${a.height}`,width:e,height:r,preserveAspectRatio:i||"xMidYMid meet"},M("g",null,t.seats.map(e=>M(ie,{seat:e,type:t.types.find(t=>t.id===e.type)||Bt()}))))}var je=ht(Se,{":host, .host":{display:"inline-block"}});r.d(e,"SeatMapperChangeEvent",function(){return Te});class Te extends Event{constructor(t){super("change"),this.structure=Object.freeze(Object.assign({},t))}}function Ae(t,e){const r=t.getAttribute(e);return null!==r?parseFloat(r):void 0}customElements.define("seat-mapper",Pe(class extends J{constructor(t){super(t),this.onStoreUpdate=(t=>{(void 0===this.state.state||function(t,e){return!yt(t.seats,e.seats,Gt)||!yt(t.types,e.types,It)}(t.structure,this.state.state.structure))&&this.props.onChange(t.structure),this.setState({state:t})}),this.mousemove=(t=>{this.store.updateMousePosition($t(t))}),this.mousedown=(t=>{t.shiftKey&&this.store.startGraping($t(t))}),this.mouseup=(()=>this.store.endGraping()),this.onKeyPress=(t=>{switch(t.key){case"Escape":this.store.cancelAction();break;case"Backspace":case"Delete":this.store.removeSeats();break;case"r":case"R":t.ctrlKey||t.altKey||this.store.renameSelectedSeats()}}),this.store=new ee({language:t.language,structure:t.initialStructure||Ft(t.language),selectedSeatIds:[],translation:i,mousePosition:i},this.onStoreUpdate)}componentWillReceiveProps(t){this.store.reload(t.initialStructure||Ft(t.language),t.language)}render({},t){return M("div",{class:"host",onKeyPress:this.onKeyPress,tabIndex:-1},M("style",null,lt(Me)),M(fe,{language:t.state.language,add:this.store.startAddSeat,startAddLine:this.store.startAddLine,startAddGrid:this.store.startAddGrid,renameSelectedSeat:this.store.renameSelectedSeats,removeSeat:this.store.removeSeats,cancelAction:this.store.cancelAction}),M("div",{class:"row"},M("div",{class:"map-container",onMouseMove:this.mousemove,onMouseDown:this.mousedown,onMouseUp:this.mouseup},M(ne,{state:t.state,selectSeat:this.store.selectSeat,deselectAllSeats:this.store.deselectAllSeats,startZoneSelection:this.store.startZoneSelection,startMoveSeats:this.store.startMoveSeats,renameSeat:this.store.renameSeat,confirmAction:this.store.confirmAction})),M(xe,{state:t.state,updateSeat:this.store.updateSeat,updateSelectedSeats:this.store.updateSelectedSeats,addType:this.store.addType,updateType:this.store.updateType,removeType:this.store.removeType})))}},["initial-structure","language"],t=>{const e=t.getAttribute("initial-structure"),r=null!==e?JSON.parse(e):void 0;return{initialStructure:void 0!==r?Ge(r):void 0,language:t.getAttribute("language")||void 0,onChange:e=>{const r=t.getAttribute("version")||void 0;t.dispatchEvent(new Te(function(t,e){switch(e||""){case"0.1.0":case"0.1.1":case"0.2.0":case"0.2.1":default:return Oe(t)}}(e||Ft,r)))}}})),customElements.define("seat-mapper-preview",Pe(class extends J{constructor(t){super(t)}render(t){return M("div",{class:"host preview"},M("style",null,lt(je)),M(_e,Object.assign({},t)))}},["structure","width","height","preserve-aspect-ratio"],t=>{const e=t.getAttribute("structure"),r=null!==e?JSON.parse(e):void 0;return{structure:(void 0!==r?Ge(r):void 0)||Ft(),width:Ae(t,"width"),height:Ae(t,"height"),preserveAspectRatio:t.getAttribute("preserve-aspect-ratio")||void 0}}))}]);